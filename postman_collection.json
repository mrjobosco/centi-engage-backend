{
  "info": {
    "_postman_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "name": "Multi-Tenant NestJS API - Comprehensive Collection",
    "description": "Complete API collection for the Multi-Tenant NestJS Starter with Google OAuth, Notifications, Monitoring, and all system endpoints. This collection includes comprehensive test scripts, environment variable management, and realistic examples for all API functionality.\n\n## Features Covered:\n- Complete Authentication flows (Basic + Google OAuth)\n- Tenant Management with Google SSO settings\n- User, Role, and Permission Management\n- Project Management\n- Comprehensive Notification System\n- Health Checks and System Monitoring\n- Proper tenant isolation and security\n\n## Usage:\n1. Set up your environment variables (baseUrl, etc.)\n2. Start with tenant registration or use existing tenant\n3. Authenticate to get access token\n4. Use any endpoint with proper authentication\n\n## Environment Variables:\nAll necessary variables are automatically captured during API interactions.",
    "version": "2.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{accessToken}}",
        "type": "string"
      }
    ]
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global pre-request script for common setup",
          "// Ensure tenant header is set for authenticated requests",
          "if (pm.collectionVariables.get('tenantId') && !pm.request.headers.has('x-tenant-id')) {",
          "    pm.request.headers.add({",
          "        key: 'x-tenant-id',",
          "        value: pm.collectionVariables.get('tenantId')",
          "    });",
          "}",
          "",
          "// Set common headers",
          "pm.request.headers.add({",
          "    key: 'User-Agent',",
          "    value: 'Postman-Collection/2.0.0'",
          "});",
          "",
          "// Log request for debugging",
          "console.log(`Making ${pm.request.method} request to: ${pm.request.url}`);"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test script for common validations",
          "pm.test('Response time is acceptable', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "pm.test('Response has proper content type', function () {",
          "    const contentType = pm.response.headers.get('Content-Type');",
          "    if (contentType) {",
          "        pm.expect(contentType).to.include('application/json');",
          "    }",
          "});",
          "",
          "// Authentication-specific global validations",
          "if (pm.request.url.toString().includes('/auth/')) {",
          "    // Validate authentication endpoints have proper error handling",
          "    if (pm.response.code >= 400) {",
          "        pm.test('Auth error response has message', function () {",
          "            const responseJson = pm.response.json();",
          "            pm.expect(responseJson).to.have.property('message');",
          "        });",
          "    }",
          "    ",
          "    // Log authentication-specific metrics",
          "    if (pm.response.code === 200 && pm.response.json().accessToken) {",
          "        console.log('üîë Access token received and will be captured');",
          "    }",
          "    ",
          "    // Validate rate limiting for auth endpoints",
          "    if (pm.response.code === 429) {",
          "        console.log('‚ö†Ô∏è Rate limit hit on authentication endpoint');",
          "        pm.test('Rate limit response has retry information', function () {",
          "            const headers = pm.response.headers;",
          "            // Should have some indication of when to retry",
          "            const hasRetryAfter = headers.has('Retry-After') || headers.has('X-RateLimit-Reset');",
          "            pm.expect(hasRetryAfter).to.be.true;",
          "        });",
          "    }",
          "}",
          "",
          "// Security validation for all endpoints",
          "pm.test('Response does not leak sensitive information', function () {",
          "    const responseText = pm.response.text().toLowerCase();",
          "    const sensitivePatterns = [",
          "        /password[\"']?\\s*:\\s*[\"'][^\"']+[\"']/,",
          "        /secret[\"']?\\s*:\\s*[\"'][^\"']+[\"']/,",
          "        /private[_-]?key/,",
          "        /database[_-]?url/",
          "    ];",
          "    ",
          "    sensitivePatterns.forEach(pattern => {",
          "        pm.expect(responseText).to.not.match(pattern);",
          "    });",
          "});",
          "",
          "// Log response status for debugging",
          "console.log(`Response status: ${pm.response.status} (${pm.response.code})`);"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/api",
      "type": "string",
      "description": "Base URL for the API (development: http://localhost:3000/api, production: update as needed)"
    },
    {
      "key": "tenantId",
      "value": "",
      "type": "string",
      "description": "Current tenant identifier - automatically captured during tenant registration or login"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "string",
      "description": "JWT authentication token - automatically captured during login"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string",
      "description": "Current user ID - automatically captured during user operations"
    },
    {
      "key": "roleId",
      "value": "",
      "type": "string",
      "description": "Role ID for testing role operations - automatically captured during role creation"
    },
    {
      "key": "permissionId",
      "value": "",
      "type": "string",
      "description": "Permission ID for testing permission operations - automatically captured during permission creation"
    },
    {
      "key": "projectId",
      "value": "",
      "type": "string",
      "description": "Project ID for testing project operations - automatically captured during project creation"
    },
    {
      "key": "notificationId",
      "value": "",
      "type": "string",
      "description": "Notification ID for testing notification operations - automatically captured during notification creation"
    },
    {
      "key": "googleAuthUrl",
      "value": "",
      "type": "string",
      "description": "Google OAuth authorization URL - automatically captured during OAuth initiation"
    },
    {
      "key": "googleState",
      "value": "",
      "type": "string",
      "description": "Google OAuth state parameter - automatically captured during OAuth flow"
    },
    {
      "key": "googleCode",
      "value": "",
      "type": "string",
      "description": "Google OAuth authorization code - manually set from OAuth callback"
    },
    {
      "key": "refreshToken",
      "value": "",
      "type": "string",
      "description": "JWT refresh token - automatically captured when available"
    },
    {
      "key": "adminUserId",
      "value": "",
      "type": "string",
      "description": "Admin user ID for testing admin operations - automatically captured during tenant registration"
    },
    {
      "key": "testEmail",
      "value": "test@example.com",
      "type": "string",
      "description": "Test email address for user operations"
    },
    {
      "key": "testPassword",
      "value": "TestPass123!",
      "type": "string",
      "description": "Test password for user operations"
    },
    {
      "key": "googleLinkUrl",
      "value": "",
      "type": "string",
      "description": "Google OAuth URL for account linking - automatically captured during linking initiation"
    },
    {
      "key": "googleLinkState",
      "value": "",
      "type": "string",
      "description": "Google OAuth state for account linking - automatically captured during linking initiation"
    },
    {
      "key": "googleLinkCode",
      "value": "",
      "type": "string",
      "description": "Google OAuth authorization code for linking - manually set from OAuth callback"
    }
  ],
  "item": [
    {
      "name": "üè• Environment Setup",
      "description": "Initial setup and health check endpoints to verify system status before testing",
      "item": [
        {
          "name": "Health Checks",
          "description": "Basic health check endpoints to verify system components",
          "item": []
        },
        {
          "name": "Configuration Tests",
          "description": "Test environment configuration and connectivity",
          "item": []
        }
      ]
    },
    {
      "name": "üîê Authentication",
      "description": "Complete authentication flows including basic auth and Google OAuth integration",
      "item": [
        {
          "name": "Basic Auth",
          "description": "Standard email/password authentication endpoints",
          "item": [
            {
              "name": "Login",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text",
                    "description": "Tenant identifier - required for all authentication requests"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/login",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "auth",
                    "login"
                  ]
                },
                "description": "Authenticate a user with email and password. Returns a JWT access token that will be automatically captured for subsequent requests.\n\n**Required Headers:**\n- `x-tenant-id`: Tenant identifier\n- `Content-Type`: application/json\n\n**Request Body:**\n- `email`: User's email address\n- `password`: User's password\n\n**Response:**\n- `accessToken`: JWT token for authenticated requests\n\n**Rate Limiting:** 5 requests per minute\n\n**Example Scenarios:**\n- Valid credentials: Returns 200 with access token\n- Invalid credentials: Returns 401 Unauthorized\n- Missing tenant ID: Returns 400 Bad Request\n- Rate limit exceeded: Returns 429 Too Many Requests"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for login endpoint",
                      "",
                      "// Status code validation",
                      "pm.test('Login request returns successful status', function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                      "});",
                      "",
                      "// Response time validation",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                      "});",
                      "",
                      "// Content type validation",
                      "pm.test('Response content type is JSON', function () {",
                      "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                      "});",
                      "",
                      "// Response structure validation",
                      "pm.test('Response contains access token', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('accessToken');",
                      "    pm.expect(responseJson.accessToken).to.be.a('string');",
                      "    pm.expect(responseJson.accessToken.length).to.be.greaterThan(0);",
                      "});",
                      "",
                      "// Capture access token for subsequent requests",
                      "pm.test('Access token captured successfully', function () {",
                      "    const responseJson = pm.response.json();",
                      "    if (responseJson.accessToken) {",
                      "        pm.collectionVariables.set('accessToken', responseJson.accessToken);",
                      "        console.log('‚úÖ Access token captured and stored');",
                      "    }",
                      "});",
                      "",
                      "// Capture user ID if present in response",
                      "if (pm.response.code === 200) {",
                      "    const responseJson = pm.response.json();",
                      "    if (responseJson.user && responseJson.user.id) {",
                      "        pm.collectionVariables.set('userId', responseJson.user.id);",
                      "        console.log('‚úÖ User ID captured:', responseJson.user.id);",
                      "    }",
                      "}",
                      "",
                      "// Log authentication status",
                      "if (pm.response.code === 200) {",
                      "    console.log('üîê Authentication successful');",
                      "} else if (pm.response.code === 401) {",
                      "    console.log('‚ùå Authentication failed - Invalid credentials');",
                      "} else if (pm.response.code === 400) {",
                      "    console.log('‚ùå Bad request - Check tenant ID and request format');",
                      "} else if (pm.response.code === 429) {",
                      "    console.log('‚ö†Ô∏è Rate limit exceeded - Wait before retrying');",
                      "}"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for login",
                      "",
                      "// Ensure tenant ID is set",
                      "const tenantId = pm.collectionVariables.get('tenantId');",
                      "if (!tenantId) {",
                      "    console.log('‚ö†Ô∏è Warning: tenantId not set. Please set a tenant ID first.');",
                      "    console.log('üí° Tip: Register a tenant first or set tenantId manually');",
                      "}",
                      "",
                      "// Log request details",
                      "console.log('üîê Attempting login with:', {",
                      "    email: pm.collectionVariables.get('testEmail'),",
                      "    tenantId: tenantId",
                      "});",
                      "",
                      "// Clear any existing access token",
                      "pm.collectionVariables.set('accessToken', '');",
                      "console.log('üßπ Cleared existing access token');"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Login - Invalid Credentials Example",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"invalid@example.com\",\n  \"password\": \"wrongpassword\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/login",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "auth",
                    "login"
                  ]
                },
                "description": "Example of login attempt with invalid credentials. This request demonstrates error handling and should return a 401 Unauthorized response.\n\n**Expected Response:** 401 Unauthorized\n**Use Case:** Testing authentication error handling and security validation"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for invalid login attempt",
                      "",
                      "pm.test('Invalid credentials return 401 Unauthorized', function () {",
                      "    pm.expect(pm.response.code).to.equal(401);",
                      "});",
                      "",
                      "pm.test('Error response has proper structure', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('message');",
                      "});",
                      "",
                      "pm.test('No access token in error response', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.not.have.property('accessToken');",
                      "});",
                      "",
                      "console.log('‚úÖ Invalid credentials properly rejected');"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Login - Missing Tenant ID Example",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/login",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "auth",
                    "login"
                  ]
                },
                "description": "Example of login attempt without tenant ID header. This request demonstrates tenant isolation validation and should return a 400 Bad Request response.\n\n**Expected Response:** 400 Bad Request\n**Use Case:** Testing tenant isolation and required header validation"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for missing tenant ID",
                      "",
                      "pm.test('Missing tenant ID returns 400 Bad Request', function () {",
                      "    pm.expect(pm.response.code).to.equal(400);",
                      "});",
                      "",
                      "pm.test('Error message mentions tenant ID requirement', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson.message.toLowerCase()).to.include('tenant');",
                      "});",
                      "",
                      "console.log('‚úÖ Tenant ID requirement properly enforced');"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Authentication Validation Suite",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/login",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "auth",
                    "login"
                  ]
                },
                "description": "Comprehensive authentication validation suite that tests multiple aspects of the login endpoint including token validation, response time, security headers, and proper error handling.\n\n**Validation Coverage:**\n- Response time performance\n- JWT token format validation\n- Security headers presence\n- Rate limiting compliance\n- Error response structure\n- Token expiration validation\n\n**Use Case:** Complete authentication system validation and security testing"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Comprehensive Authentication Validation Suite",
                      "",
                      "// Performance validation",
                      "pm.test('Authentication response time is optimal', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                      "    if (pm.response.responseTime > 1000) {",
                      "        console.log('‚ö†Ô∏è Warning: Authentication took longer than 1 second');",
                      "    }",
                      "});",
                      "",
                      "// Security headers validation",
                      "pm.test('Security headers are present', function () {",
                      "    // Check for common security headers",
                      "    const headers = pm.response.headers;",
                      "    ",
                      "    // Content-Type should be JSON",
                      "    pm.expect(headers.get('Content-Type')).to.include('application/json');",
                      "    ",
                      "    // Log security header status",
                      "    console.log('üîí Security headers check:');",
                      "    console.log('  Content-Type:', headers.get('Content-Type') || 'Missing');",
                      "    console.log('  X-Frame-Options:', headers.get('X-Frame-Options') || 'Not set');",
                      "    console.log('  X-Content-Type-Options:', headers.get('X-Content-Type-Options') || 'Not set');",
                      "});",
                      "",
                      "// JWT token format validation",
                      "if (pm.response.code === 200) {",
                      "    pm.test('JWT token has valid format', function () {",
                      "        const responseJson = pm.response.json();",
                      "        const token = responseJson.accessToken;",
                      "        ",
                      "        // JWT should have 3 parts separated by dots",
                      "        const tokenParts = token.split('.');",
                      "        pm.expect(tokenParts).to.have.lengthOf(3);",
                      "        ",
                      "        // Each part should be base64 encoded",
                      "        tokenParts.forEach((part, index) => {",
                      "            pm.expect(part.length).to.be.greaterThan(0);",
                      "        });",
                      "        ",
                      "        console.log('‚úÖ JWT token format validation passed');",
                      "    });",
                      "    ",
                      "    pm.test('JWT token contains valid claims', function () {",
                      "        const responseJson = pm.response.json();",
                      "        const token = responseJson.accessToken;",
                      "        ",
                      "        try {",
                      "            // Decode JWT payload (without verification for testing)",
                      "            const payload = JSON.parse(atob(token.split('.')[1]));",
                      "            ",
                      "            // Check for required claims",
                      "            pm.expect(payload).to.have.property('sub'); // Subject (user ID)",
                      "            pm.expect(payload).to.have.property('iat'); // Issued at",
                      "            pm.expect(payload).to.have.property('exp'); // Expiration",
                      "            ",
                      "            // Validate expiration is in the future",
                      "            const now = Math.floor(Date.now() / 1000);",
                      "            pm.expect(payload.exp).to.be.greaterThan(now);",
                      "            ",
                      "            console.log('‚úÖ JWT claims validation passed');",
                      "            console.log('  Subject:', payload.sub);",
                      "            console.log('  Expires:', new Date(payload.exp * 1000).toISOString());",
                      "        } catch (error) {",
                      "            pm.expect.fail('Failed to decode JWT token: ' + error.message);",
                      "        }",
                      "    });",
                      "}",
                      "",
                      "// Rate limiting awareness",
                      "pm.test('Rate limiting headers check', function () {",
                      "    const headers = pm.response.headers;",
                      "    ",
                      "    // Log rate limiting information if available",
                      "    const rateLimitRemaining = headers.get('X-RateLimit-Remaining');",
                      "    const rateLimitReset = headers.get('X-RateLimit-Reset');",
                      "    ",
                      "    if (rateLimitRemaining) {",
                      "        console.log('üö¶ Rate limit remaining:', rateLimitRemaining);",
                      "        if (parseInt(rateLimitRemaining) < 2) {",
                      "            console.log('‚ö†Ô∏è Warning: Rate limit nearly exceeded');",
                      "        }",
                      "    }",
                      "    ",
                      "    if (rateLimitReset) {",
                      "        console.log('üïí Rate limit resets at:', new Date(parseInt(rateLimitReset) * 1000).toISOString());",
                      "    }",
                      "});",
                      "",
                      "// Error response validation for non-200 responses",
                      "if (pm.response.code !== 200) {",
                      "    pm.test('Error response has proper structure', function () {",
                      "        const responseJson = pm.response.json();",
                      "        ",
                      "        // Should have error message",
                      "        pm.expect(responseJson).to.have.property('message');",
                      "        pm.expect(responseJson.message).to.be.a('string');",
                      "        pm.expect(responseJson.message.length).to.be.greaterThan(0);",
                      "        ",
                      "        // Should not leak sensitive information",
                      "        const sensitiveTerms = ['password', 'secret', 'key', 'token', 'hash'];",
                      "        const message = responseJson.message.toLowerCase();",
                      "        sensitiveTerms.forEach(term => {",
                      "            pm.expect(message).to.not.include(term);",
                      "        });",
                      "        ",
                      "        console.log('‚úÖ Error response structure validated');",
                      "    });",
                      "}",
                      "",
                      "// Overall authentication status summary",
                      "const statusMessages = {",
                      "    200: 'üîê Authentication successful',",
                      "    400: '‚ùå Bad request - Check request format and tenant ID',",
                      "    401: '‚ùå Authentication failed - Invalid credentials',",
                      "    429: '‚ö†Ô∏è Rate limit exceeded - Wait before retrying',",
                      "    500: 'üö® Server error - Check system status'",
                      "};",
                      "",
                      "console.log(statusMessages[pm.response.code] || `‚ùì Unexpected status: ${pm.response.code}`);"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for comprehensive validation",
                      "",
                      "console.log('üß™ Running comprehensive authentication validation suite');",
                      "",
                      "// Log test environment",
                      "console.log('üìä Test Environment:');",
                      "console.log('  Base URL:', pm.collectionVariables.get('baseUrl'));",
                      "console.log('  Tenant ID:', pm.collectionVariables.get('tenantId'));",
                      "console.log('  Test Email:', pm.collectionVariables.get('testEmail'));",
                      "",
                      "// Clear any existing token for clean test",
                      "pm.collectionVariables.set('accessToken', '');",
                      "",
                      "// Record test start time",
                      "pm.collectionVariables.set('testStartTime', Date.now());"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "Google OAuth Flow",
          "description": "Google OAuth 2.0 authentication flow endpoints",
          "item": [
            {
              "name": "1. Initiate Google OAuth",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text",
                    "description": "Tenant identifier - required to verify Google SSO is enabled"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/auth/google",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "auth",
                    "google"
                  ]
                },
                "description": "Initiates Google OAuth authentication flow. Returns authorization URL and state parameter for CSRF protection.\n\n**Required Headers:**\n- `x-tenant-id`: Tenant identifier\n\n**Response:**\n- `authUrl`: Google OAuth authorization URL\n- `state`: CSRF protection state parameter\n\n**Rate Limiting:** 10 requests per minute\n\n**Prerequisites:**\n- Tenant must have Google SSO enabled\n- Valid tenant ID must be provided\n\n**Next Steps:**\n1. Copy the `authUrl` from response\n2. Open URL in browser to authenticate with Google\n3. After Google authentication, copy the `code` parameter from callback URL\n4. Use the `code` and `state` in the callback endpoint\n\n**Example Flow:**\n1. GET /auth/google ‚Üí Returns authUrl and state\n2. User visits authUrl in browser\n3. User authenticates with Google\n4. Google redirects to callback with code\n5. POST /auth/google/callback with code and state"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Google OAuth initiation",
                      "",
                      "pm.test('OAuth initiation returns successful status', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Response contains authorization URL', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('authUrl');",
                      "    pm.expect(responseJson.authUrl).to.be.a('string');",
                      "    pm.expect(responseJson.authUrl).to.include('accounts.google.com');",
                      "});",
                      "",
                      "pm.test('Response contains state parameter', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('state');",
                      "    pm.expect(responseJson.state).to.be.a('string');",
                      "    pm.expect(responseJson.state.length).to.be.greaterThan(10);",
                      "});",
                      "",
                      "// Capture OAuth parameters for callback",
                      "pm.test('OAuth parameters captured successfully', function () {",
                      "    const responseJson = pm.response.json();",
                      "    if (responseJson.authUrl && responseJson.state) {",
                      "        pm.collectionVariables.set('googleAuthUrl', responseJson.authUrl);",
                      "        pm.collectionVariables.set('googleState', responseJson.state);",
                      "        console.log('‚úÖ Google OAuth URL and state captured');",
                      "        console.log('üîó Authorization URL:', responseJson.authUrl);",
                      "        console.log('üîë State parameter:', responseJson.state);",
                      "    }",
                      "});",
                      "",
                      "// Instructions for manual OAuth flow",
                      "if (pm.response.code === 200) {",
                      "    const responseJson = pm.response.json();",
                      "    console.log('');",
                      "    console.log('üìã NEXT STEPS FOR GOOGLE OAUTH:');",
                      "    console.log('1. Copy this URL and open in browser:');",
                      "    console.log('   ' + responseJson.authUrl);",
                      "    console.log('2. Complete Google authentication');",
                      "    console.log('3. Copy the \"code\" parameter from the callback URL');",
                      "    console.log('4. Set the googleCode variable with that value');",
                      "    console.log('5. Run the \"Complete Google OAuth\" request');",
                      "}"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Google OAuth initiation",
                      "",
                      "// Ensure tenant ID is set",
                      "const tenantId = pm.collectionVariables.get('tenantId');",
                      "if (!tenantId) {",
                      "    console.log('‚ö†Ô∏è Warning: tenantId not set. Google OAuth requires a valid tenant.');",
                      "    console.log('üí° Tip: Register a tenant first or set tenantId manually');",
                      "}",
                      "",
                      "console.log('üîê Initiating Google OAuth flow for tenant:', tenantId);"
                    ]
                  }
                }
              ]
            },
            {
              "name": "2. Complete Google OAuth",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"code\": \"{{googleCode}}\",\n  \"state\": \"{{googleState}}\",\n  \"tenantId\": \"{{tenantId}}\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/google/callback",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "auth",
                    "google",
                    "callback"
                  ]
                },
                "description": "Completes Google OAuth authentication flow. Exchanges authorization code for JWT token.\n\n**Required Body Parameters:**\n- `code`: Authorization code from Google OAuth callback\n- `state`: State parameter from OAuth initiation (for CSRF protection)\n- `tenantId`: Tenant identifier\n\n**Response:**\n- `accessToken`: JWT token for authenticated requests\n\n**Rate Limiting:** 10 requests per minute\n\n**Prerequisites:**\n1. Must have initiated OAuth flow with GET /auth/google\n2. Must have completed Google authentication in browser\n3. Must have valid authorization code from Google\n\n**Manual Setup Required:**\n- Set `googleCode` variable with the authorization code from Google's callback URL\n- The `state` and `tenantId` are automatically populated from previous requests\n\n**Error Scenarios:**\n- Invalid/expired state: 400 Bad Request\n- Invalid authorization code: 401 Unauthorized\n- Google SSO disabled: 403 Forbidden\n- User not allowed in tenant: 403 Forbidden"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Google OAuth callback",
                      "",
                      "pm.test('OAuth callback returns successful status', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Response contains access token', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('accessToken');",
                      "    pm.expect(responseJson.accessToken).to.be.a('string');",
                      "    pm.expect(responseJson.accessToken.length).to.be.greaterThan(0);",
                      "});",
                      "",
                      "// Capture access token for subsequent requests",
                      "pm.test('Access token captured successfully', function () {",
                      "    const responseJson = pm.response.json();",
                      "    if (responseJson.accessToken) {",
                      "        pm.collectionVariables.set('accessToken', responseJson.accessToken);",
                      "        console.log('‚úÖ Google OAuth access token captured and stored');",
                      "    }",
                      "});",
                      "",
                      "// Capture user information if present",
                      "if (pm.response.code === 200) {",
                      "    const responseJson = pm.response.json();",
                      "    if (responseJson.user && responseJson.user.id) {",
                      "        pm.collectionVariables.set('userId', responseJson.user.id);",
                      "        console.log('‚úÖ User ID captured:', responseJson.user.id);",
                      "    }",
                      "}",
                      "",
                      "// Clear OAuth temporary variables",
                      "if (pm.response.code === 200) {",
                      "    pm.collectionVariables.set('googleCode', '');",
                      "    console.log('üßπ Cleared temporary OAuth variables');",
                      "}",
                      "",
                      "// Log authentication status",
                      "if (pm.response.code === 200) {",
                      "    console.log('üîê Google OAuth authentication successful');",
                      "} else if (pm.response.code === 400) {",
                      "    console.log('‚ùå Bad request - Check state parameter and authorization code');",
                      "} else if (pm.response.code === 401) {",
                      "    console.log('‚ùå Unauthorized - Invalid authorization code or expired state');",
                      "} else if (pm.response.code === 403) {",
                      "    console.log('‚ùå Forbidden - Google SSO disabled or user not allowed');",
                      "}"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Google OAuth callback",
                      "",
                      "// Check required variables",
                      "const googleCode = pm.collectionVariables.get('googleCode');",
                      "const googleState = pm.collectionVariables.get('googleState');",
                      "const tenantId = pm.collectionVariables.get('tenantId');",
                      "",
                      "if (!googleCode) {",
                      "    console.log('‚ö†Ô∏è Warning: googleCode not set. You need to:');",
                      "    console.log('1. Run \"Initiate Google OAuth\" first');",
                      "    console.log('2. Complete authentication in browser');",
                      "    console.log('3. Set googleCode variable from callback URL');",
                      "}",
                      "",
                      "if (!googleState) {",
                      "    console.log('‚ö†Ô∏è Warning: googleState not set. Run \"Initiate Google OAuth\" first.');",
                      "}",
                      "",
                      "if (!tenantId) {",
                      "    console.log('‚ö†Ô∏è Warning: tenantId not set. Set tenant ID first.');",
                      "}",
                      "",
                      "console.log('üîê Completing Google OAuth with:', {",
                      "    hasCode: !!googleCode,",
                      "    hasState: !!googleState,",
                      "    tenantId: tenantId",
                      "});"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "Account Linking",
          "description": "Link and unlink Google accounts with existing users",
          "item": [
            {
              "name": "1. Initiate Google Account Linking",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text",
                    "description": "JWT token for authenticated user"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/auth/google/link",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "auth",
                    "google",
                    "link"
                  ]
                },
                "description": "Initiates Google account linking flow for authenticated users. Returns authorization URL and state parameter.\n\n**Authentication Required:** Yes (Bearer token)\n\n**Response:**\n- `authUrl`: Google OAuth authorization URL for linking\n- `state`: CSRF protection state parameter (includes user ID)\n\n**Rate Limiting:** 5 requests per minute\n\n**Prerequisites:**\n- User must be authenticated (valid access token)\n- User must not already have Google account linked\n\n**Use Cases:**\n- Link Google account to existing password-based account\n- Add Google as additional authentication method\n- Enable Google SSO for existing users\n\n**Next Steps:**\n1. Copy the `authUrl` from response\n2. Open URL in browser to authenticate with Google\n3. After Google authentication, copy the `code` parameter from callback URL\n4. Use the `code` and `state` in the link callback endpoint"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Google account linking initiation",
                      "",
                      "pm.test('Account linking initiation returns successful status', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Response contains authorization URL', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('authUrl');",
                      "    pm.expect(responseJson.authUrl).to.be.a('string');",
                      "    pm.expect(responseJson.authUrl).to.include('accounts.google.com');",
                      "});",
                      "",
                      "pm.test('Response contains state parameter', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('state');",
                      "    pm.expect(responseJson.state).to.be.a('string');",
                      "    pm.expect(responseJson.state.length).to.be.greaterThan(10);",
                      "});",
                      "",
                      "// Capture linking parameters",
                      "pm.test('Linking parameters captured successfully', function () {",
                      "    const responseJson = pm.response.json();",
                      "    if (responseJson.authUrl && responseJson.state) {",
                      "        pm.collectionVariables.set('googleLinkUrl', responseJson.authUrl);",
                      "        pm.collectionVariables.set('googleLinkState', responseJson.state);",
                      "        console.log('‚úÖ Google linking URL and state captured');",
                      "        console.log('üîó Linking URL:', responseJson.authUrl);",
                      "    }",
                      "});",
                      "",
                      "// Instructions for manual linking flow",
                      "if (pm.response.code === 200) {",
                      "    const responseJson = pm.response.json();",
                      "    console.log('');",
                      "    console.log('üìã NEXT STEPS FOR GOOGLE ACCOUNT LINKING:');",
                      "    console.log('1. Copy this URL and open in browser:');",
                      "    console.log('   ' + responseJson.authUrl);",
                      "    console.log('2. Complete Google authentication');",
                      "    console.log('3. Copy the \"code\" parameter from the callback URL');",
                      "    console.log('4. Set the googleLinkCode variable with that value');",
                      "    console.log('5. Run the \"Complete Google Account Linking\" request');",
                      "}"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Google account linking",
                      "",
                      "// Check authentication",
                      "const accessToken = pm.collectionVariables.get('accessToken');",
                      "if (!accessToken) {",
                      "    console.log('‚ö†Ô∏è Warning: No access token found. Please login first.');",
                      "}",
                      "",
                      "console.log('üîó Initiating Google account linking for authenticated user');"
                    ]
                  }
                }
              ]
            },
            {
              "name": "2. Complete Google Account Linking",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text",
                    "description": "JWT token for authenticated user"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"code\": \"{{googleLinkCode}}\",\n  \"state\": \"{{googleLinkState}}\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/google/link/callback",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "auth",
                    "google",
                    "link",
                    "callback"
                  ]
                },
                "description": "Completes Google account linking flow. Links Google account to authenticated user.\n\n**Authentication Required:** Yes (Bearer token)\n\n**Required Body Parameters:**\n- `code`: Authorization code from Google OAuth callback\n- `state`: State parameter from linking initiation (includes user ID)\n\n**Response:**\n- `message`: Success confirmation message\n\n**Rate Limiting:** 5 requests per minute\n\n**Prerequisites:**\n1. Must be authenticated with valid access token\n2. Must have initiated linking flow with GET /auth/google/link\n3. Must have completed Google authentication in browser\n4. Must have valid authorization code from Google\n\n**Manual Setup Required:**\n- Set `googleLinkCode` variable with the authorization code from Google's callback URL\n- The `state` is automatically populated from the linking initiation request\n\n**Validation Rules:**\n- Google email must match user's current email\n- Google account must not be linked to another user\n- State parameter must be valid and include correct user ID\n\n**Error Scenarios:**\n- Email mismatch: 400 Bad Request\n- Google account already linked: 409 Conflict\n- Invalid state: 400 Bad Request\n- Invalid authorization code: 401 Unauthorized"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Google account linking completion",
                      "",
                      "pm.test('Account linking returns successful status', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Response contains success message', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('message');",
                      "    pm.expect(responseJson.message).to.include('linked successfully');",
                      "});",
                      "",
                      "// Clear linking temporary variables",
                      "if (pm.response.code === 200) {",
                      "    pm.collectionVariables.set('googleLinkCode', '');",
                      "    pm.collectionVariables.set('googleLinkUrl', '');",
                      "    console.log('‚úÖ Google account linked successfully');",
                      "    console.log('üßπ Cleared temporary linking variables');",
                      "}",
                      "",
                      "// Log linking status",
                      "if (pm.response.code === 200) {",
                      "    console.log('üîó Google account linking completed successfully');",
                      "} else if (pm.response.code === 400) {",
                      "    console.log('‚ùå Bad request - Check email match and state parameter');",
                      "} else if (pm.response.code === 409) {",
                      "    console.log('‚ùå Conflict - Google account already linked to another user');",
                      "} else if (pm.response.code === 401) {",
                      "    console.log('‚ùå Unauthorized - Invalid authorization code or state');",
                      "}"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Google account linking completion",
                      "",
                      "// Check required variables",
                      "const accessToken = pm.collectionVariables.get('accessToken');",
                      "const googleLinkCode = pm.collectionVariables.get('googleLinkCode');",
                      "const googleLinkState = pm.collectionVariables.get('googleLinkState');",
                      "",
                      "if (!accessToken) {",
                      "    console.log('‚ö†Ô∏è Warning: No access token found. Please login first.');",
                      "}",
                      "",
                      "if (!googleLinkCode) {",
                      "    console.log('‚ö†Ô∏è Warning: googleLinkCode not set. You need to:');",
                      "    console.log('1. Run \"Initiate Google Account Linking\" first');",
                      "    console.log('2. Complete authentication in browser');",
                      "    console.log('3. Set googleLinkCode variable from callback URL');",
                      "}",
                      "",
                      "if (!googleLinkState) {",
                      "    console.log('‚ö†Ô∏è Warning: googleLinkState not set. Run linking initiation first.');",
                      "}",
                      "",
                      "console.log('üîó Completing Google account linking with:', {",
                      "    hasToken: !!accessToken,",
                      "    hasCode: !!googleLinkCode,",
                      "    hasState: !!googleLinkState",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "3. Unlink Google Account",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text",
                    "description": "JWT token for authenticated user"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/auth/google/unlink",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "auth",
                    "google",
                    "unlink"
                  ]
                },
                "description": "Unlinks Google account from authenticated user. Requires at least one other authentication method.\n\n**Authentication Required:** Yes (Bearer token)\n\n**Response:**\n- `message`: Success confirmation message\n\n**Rate Limiting:** 5 requests per minute\n\n**Prerequisites:**\n- User must be authenticated with valid access token\n- User must have Google account linked\n- User must have at least one other authentication method (password)\n\n**Security Rules:**\n- Cannot unlink if it's the only authentication method\n- User must maintain at least one way to authenticate\n\n**Use Cases:**\n- Remove Google authentication method\n- Security cleanup when changing authentication preferences\n- Account security management\n\n**Error Scenarios:**\n- Google account not linked: 404 Not Found\n- Only authentication method: 400 Bad Request\n- Not authenticated: 401 Unauthorized"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Google account unlinking",
                      "",
                      "pm.test('Account unlinking returns successful status', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Response contains success message', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('message');",
                      "    pm.expect(responseJson.message).to.include('unlinked successfully');",
                      "});",
                      "",
                      "// Log unlinking status",
                      "if (pm.response.code === 200) {",
                      "    console.log('üîì Google account unlinked successfully');",
                      "} else if (pm.response.code === 400) {",
                      "    console.log('‚ùå Bad request - Cannot unlink only authentication method');",
                      "} else if (pm.response.code === 404) {",
                      "    console.log('‚ùå Not found - Google account not linked to this user');",
                      "} else if (pm.response.code === 401) {",
                      "    console.log('‚ùå Unauthorized - Authentication required');",
                      "}"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Google account unlinking",
                      "",
                      "// Check authentication",
                      "const accessToken = pm.collectionVariables.get('accessToken');",
                      "if (!accessToken) {",
                      "    console.log('‚ö†Ô∏è Warning: No access token found. Please login first.');",
                      "}",
                      "",
                      "console.log('üîì Unlinking Google account for authenticated user');"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "Auth Management",
          "description": "Manage authentication methods and user auth status",
          "item": [
            {
              "name": "Get User Authentication Methods",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text",
                    "description": "JWT token for authenticated user"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/auth/me/auth-methods",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "auth",
                    "me",
                    "auth-methods"
                  ]
                },
                "description": "Returns the available authentication methods for the authenticated user.\n\n**Authentication Required:** Yes (Bearer token)\n\n**Response:**\n- `authMethods`: Array of available authentication methods\n\n**Possible Authentication Methods:**\n- `password`: Email/password authentication\n- `google`: Google OAuth authentication\n\n**Use Cases:**\n- Check which authentication methods are available\n- Determine if user can unlink Google account\n- Display authentication options in UI\n- Security audit of user authentication methods\n\n**Example Response:**\n```json\n{\n  \"authMethods\": [\"password\", \"google\"]\n}\n```\n\n**Security Notes:**\n- Users must have at least one authentication method\n- This endpoint helps prevent users from removing their only auth method"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for authentication methods endpoint",
                      "",
                      "pm.test('Auth methods request returns successful status', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Response contains auth methods array', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('authMethods');",
                      "    pm.expect(responseJson.authMethods).to.be.an('array');",
                      "});",
                      "",
                      "pm.test('Auth methods array is not empty', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson.authMethods.length).to.be.greaterThan(0);",
                      "});",
                      "",
                      "pm.test('Auth methods contain valid values', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const validMethods = ['password', 'google'];",
                      "    responseJson.authMethods.forEach(method => {",
                      "        pm.expect(validMethods).to.include(method);",
                      "    });",
                      "});",
                      "",
                      "// Log authentication methods",
                      "if (pm.response.code === 200) {",
                      "    const responseJson = pm.response.json();",
                      "    console.log('üîê Available authentication methods:', responseJson.authMethods);",
                      "    ",
                      "    // Check if user can safely unlink Google",
                      "    if (responseJson.authMethods.includes('google') && responseJson.authMethods.length > 1) {",
                      "        console.log('‚úÖ User can safely unlink Google account (has other auth methods)');",
                      "    } else if (responseJson.authMethods.includes('google') && responseJson.authMethods.length === 1) {",
                      "        console.log('‚ö†Ô∏è User cannot unlink Google account (only auth method)');",
                      "    }",
                      "} else if (pm.response.code === 401) {",
                      "    console.log('‚ùå Unauthorized - Authentication required');",
                      "} else if (pm.response.code === 404) {",
                      "    console.log('‚ùå Not found - User not found');",
                      "}"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for authentication methods",
                      "",
                      "// Check authentication",
                      "const accessToken = pm.collectionVariables.get('accessToken');",
                      "if (!accessToken) {",
                      "    console.log('‚ö†Ô∏è Warning: No access token found. Please login first.');",
                      "}",
                      "",
                      "console.log('üîç Retrieving authentication methods for current user');"
                    ]
                  }
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "üè¢ Tenant Management",
      "description": "Tenant registration and Google SSO configuration management",
      "item": [
        {
          "name": "Tenant Registration",
          "description": "Register new tenants and manage tenant lifecycle",
          "item": [
            {
              "name": "Register New Tenant",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"tenantName\": \"Acme Corporation\",\n  \"adminEmail\": \"admin@acme.com\",\n  \"adminPassword\": \"SecurePass123!\",\n  \"adminFirstName\": \"John\",\n  \"adminLastName\": \"Doe\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/tenants",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "tenants"
                  ]
                },
                "description": "Register a new tenant with an admin user, default roles, and permissions. This endpoint does not require authentication and creates the complete tenant infrastructure.\n\n**Public Endpoint:** No authentication required\n\n**Request Body:**\n- `tenantName`: Organization name (2-100 characters)\n- `adminEmail`: Administrator email address\n- `adminPassword`: Strong password (min 8 chars, uppercase, lowercase, number/special char)\n- `adminFirstName`: Administrator first name (2-50 characters)\n- `adminLastName`: Administrator last name (2-50 characters)\n\n**Response:**\n- `tenant`: Created tenant information with ID\n- `adminUser`: Created admin user information\n\n**Success Response:** 201 Created\n**Error Responses:**\n- 409 Conflict: Email or tenant name already exists\n- 400 Bad Request: Invalid input data\n\n**Use Cases:**\n- Initial tenant setup for new organizations\n- Multi-tenant application onboarding\n- Admin user provisioning"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for tenant registration",
                      "",
                      "// Status code validation",
                      "pm.test('Tenant registration returns 201 Created', function () {",
                      "    pm.expect(pm.response.code).to.equal(201);",
                      "});",
                      "",
                      "// Response time validation",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(5000);",
                      "});",
                      "",
                      "// Content type validation",
                      "pm.test('Response content type is JSON', function () {",
                      "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                      "});",
                      "",
                      "// Response structure validation",
                      "pm.test('Response has correct structure', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('message');",
                      "    pm.expect(responseJson).to.have.property('data');",
                      "    pm.expect(responseJson.data).to.have.property('tenant');",
                      "    pm.expect(responseJson.data).to.have.property('adminUser');",
                      "});",
                      "",
                      "// Tenant data validation",
                      "pm.test('Tenant data is properly structured', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const tenant = responseJson.data.tenant;",
                      "    ",
                      "    pm.expect(tenant).to.have.property('id');",
                      "    pm.expect(tenant).to.have.property('name');",
                      "    pm.expect(tenant).to.have.property('createdAt');",
                      "    pm.expect(tenant).to.have.property('updatedAt');",
                      "    ",
                      "    // Validate tenant ID format (UUID)",
                      "    pm.expect(tenant.id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                      "});",
                      "",
                      "// Admin user data validation",
                      "pm.test('Admin user data is properly structured', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const adminUser = responseJson.data.adminUser;",
                      "    ",
                      "    pm.expect(adminUser).to.have.property('id');",
                      "    pm.expect(adminUser).to.have.property('email');",
                      "    pm.expect(adminUser).to.have.property('firstName');",
                      "    pm.expect(adminUser).to.have.property('lastName');",
                      "    pm.expect(adminUser).to.have.property('tenantId');",
                      "    ",
                      "    // Validate user ID format (UUID)",
                      "    pm.expect(adminUser.id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                      "    ",
                      "    // Validate email format",
                      "    pm.expect(adminUser.email).to.match(/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/);",
                      "});",
                      "",
                      "// Capture tenant ID for subsequent requests",
                      "pm.test('Tenant ID captured successfully', function () {",
                      "    const responseJson = pm.response.json();",
                      "    if (responseJson.data && responseJson.data.tenant && responseJson.data.tenant.id) {",
                      "        pm.collectionVariables.set('tenantId', responseJson.data.tenant.id);",
                      "        console.log('‚úÖ Tenant ID captured:', responseJson.data.tenant.id);",
                      "    }",
                      "});",
                      "",
                      "// Capture admin user ID for subsequent requests",
                      "pm.test('Admin user ID captured successfully', function () {",
                      "    const responseJson = pm.response.json();",
                      "    if (responseJson.data && responseJson.data.adminUser && responseJson.data.adminUser.id) {",
                      "        pm.collectionVariables.set('adminUserId', responseJson.data.adminUser.id);",
                      "        pm.collectionVariables.set('userId', responseJson.data.adminUser.id);",
                      "        console.log('‚úÖ Admin user ID captured:', responseJson.data.adminUser.id);",
                      "    }",
                      "});",
                      "",
                      "// Security validation - no sensitive data in response",
                      "pm.test('Response does not contain sensitive data', function () {",
                      "    const responseText = pm.response.text().toLowerCase();",
                      "    pm.expect(responseText).to.not.include('password');",
                      "    pm.expect(responseText).to.not.include('secret');",
                      "    pm.expect(responseText).to.not.include('private');",
                      "});",
                      "",
                      "// Log registration status",
                      "if (pm.response.code === 201) {",
                      "    const responseJson = pm.response.json();",
                      "    console.log('üè¢ Tenant registration successful');",
                      "    console.log('  Tenant:', responseJson.data.tenant.name);",
                      "    console.log('  Admin:', responseJson.data.adminUser.email);",
                      "} else if (pm.response.code === 409) {",
                      "    console.log('‚ùå Conflict - Email or tenant name already exists');",
                      "} else if (pm.response.code === 400) {",
                      "    console.log('‚ùå Bad request - Check input validation');",
                      "}"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for tenant registration",
                      "",
                      "// Generate unique tenant name and email to avoid conflicts",
                      "const timestamp = Date.now();",
                      "const randomSuffix = Math.random().toString(36).substring(2, 8);",
                      "",
                      "// Update request body with unique values",
                      "const requestBody = JSON.parse(pm.request.body.raw);",
                      "requestBody.tenantName = `Test Tenant ${timestamp}`;",
                      "requestBody.adminEmail = `admin-${randomSuffix}@test-${timestamp}.com`;",
                      "",
                      "// Update the request body",
                      "pm.request.body.raw = JSON.stringify(requestBody, null, 2);",
                      "",
                      "console.log('üè¢ Registering tenant with unique identifiers:');",
                      "console.log('  Tenant Name:', requestBody.tenantName);",
                      "console.log('  Admin Email:', requestBody.adminEmail);",
                      "",
                      "// Clear any existing tenant context",
                      "pm.collectionVariables.set('tenantId', '');",
                      "pm.collectionVariables.set('adminUserId', '');",
                      "console.log('üßπ Cleared existing tenant context');"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Register Tenant - Conflict Example",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"tenantName\": \"Acme Corporation\",\n  \"adminEmail\": \"admin@acme.com\",\n  \"adminPassword\": \"SecurePass123!\",\n  \"adminFirstName\": \"John\",\n  \"adminLastName\": \"Doe\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/tenants",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "tenants"
                  ]
                },
                "description": "Example of tenant registration with duplicate data. This request demonstrates conflict handling when trying to register a tenant with an existing email or tenant name.\n\n**Expected Response:** 409 Conflict\n**Use Case:** Testing duplicate detection and error handling\n\n**Conflict Scenarios:**\n- Duplicate tenant name\n- Duplicate admin email address\n- Database constraint violations"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for conflict handling",
                      "",
                      "pm.test('Duplicate registration returns 409 Conflict', function () {",
                      "    pm.expect(pm.response.code).to.equal(409);",
                      "});",
                      "",
                      "pm.test('Conflict response has proper error message', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('message');",
                      "    pm.expect(responseJson.message).to.be.a('string');",
                      "    pm.expect(responseJson.message.length).to.be.greaterThan(0);",
                      "});",
                      "",
                      "pm.test('Error message indicates conflict type', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const message = responseJson.message.toLowerCase();",
                      "    const hasConflictInfo = message.includes('email') || message.includes('tenant') || message.includes('exists') || message.includes('duplicate');",
                      "    pm.expect(hasConflictInfo).to.be.true;",
                      "});",
                      "",
                      "console.log('‚úÖ Conflict handling properly implemented');"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Register Tenant - Validation Error Example",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"tenantName\": \"A\",\n  \"adminEmail\": \"invalid-email\",\n  \"adminPassword\": \"weak\",\n  \"adminFirstName\": \"\",\n  \"adminLastName\": \"D\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/tenants",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "tenants"
                  ]
                },
                "description": "Example of tenant registration with invalid data. This request demonstrates input validation and error handling for malformed or insufficient data.\n\n**Expected Response:** 400 Bad Request\n**Use Case:** Testing input validation and error messages\n\n**Validation Errors:**\n- Tenant name too short (min 2 characters)\n- Invalid email format\n- Weak password (doesn't meet complexity requirements)\n- Empty first name\n- Last name too short"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for validation error handling",
                      "",
                      "pm.test('Invalid data returns 400 Bad Request', function () {",
                      "    pm.expect(pm.response.code).to.equal(400);",
                      "});",
                      "",
                      "pm.test('Validation error response has proper structure', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('message');",
                      "    // May also have 'errors' array for detailed validation messages",
                      "});",
                      "",
                      "pm.test('Error message indicates validation failure', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const message = responseJson.message.toLowerCase();",
                      "    const hasValidationInfo = message.includes('validation') || message.includes('invalid') || message.includes('required') || message.includes('format');",
                      "    pm.expect(hasValidationInfo).to.be.true;",
                      "});",
                      "",
                      "console.log('‚úÖ Input validation properly implemented');"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "Google SSO Settings",
          "description": "Configure and manage Google SSO settings for tenants",
          "item": [
            {
              "name": "Get Google SSO Settings",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text",
                    "description": "Tenant identifier for isolation"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/tenants/{{tenantId}}/settings/google",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "tenants",
                    "{{tenantId}}",
                    "settings",
                    "google"
                  ]
                },
                "description": "Retrieve current Google SSO configuration for the specified tenant. This endpoint requires admin role authentication.\n\n**Authentication:** Bearer token required\n**Authorization:** Admin role required\n\n**Required Headers:**\n- `Authorization`: Bearer token\n- `x-tenant-id`: Tenant identifier\n\n**Path Parameters:**\n- `id`: Tenant ID (UUID)\n\n**Response:**\n- `googleSsoEnabled`: Boolean indicating if Google SSO is enabled\n- `googleAutoProvision`: Boolean indicating if auto-provisioning is enabled\n\n**Success Response:** 200 OK\n**Error Responses:**\n- 401 Unauthorized: Missing or invalid token\n- 403 Forbidden: Admin role required\n- 404 Not Found: Tenant not found\n\n**Use Cases:**\n- Check current Google SSO configuration\n- Admin dashboard settings display\n- Configuration validation before updates"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for getting Google SSO settings",
                      "",
                      "// Status code validation",
                      "pm.test('Get Google SSO settings returns 200 OK', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "// Response time validation",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                      "});",
                      "",
                      "// Content type validation",
                      "pm.test('Response content type is JSON', function () {",
                      "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                      "});",
                      "",
                      "// Response structure validation",
                      "pm.test('Response has correct Google SSO settings structure', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('googleSsoEnabled');",
                      "    pm.expect(responseJson).to.have.property('googleAutoProvision');",
                      "});",
                      "",
                      "// Data type validation",
                      "pm.test('Google SSO settings have correct data types', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson.googleSsoEnabled).to.be.a('boolean');",
                      "    pm.expect(responseJson.googleAutoProvision).to.be.a('boolean');",
                      "});",
                      "",
                      "// Store current settings for comparison in update tests",
                      "if (pm.response.code === 200) {",
                      "    const responseJson = pm.response.json();",
                      "    pm.collectionVariables.set('currentGoogleSsoEnabled', responseJson.googleSsoEnabled.toString());",
                      "    pm.collectionVariables.set('currentGoogleAutoProvision', responseJson.googleAutoProvision.toString());",
                      "    console.log('‚úÖ Current Google SSO settings captured:');",
                      "    console.log('  SSO Enabled:', responseJson.googleSsoEnabled);",
                      "    console.log('  Auto Provision:', responseJson.googleAutoProvision);",
                      "}",
                      "",
                      "// Log access status",
                      "if (pm.response.code === 200) {",
                      "    console.log('üîß Google SSO settings retrieved successfully');",
                      "} else if (pm.response.code === 403) {",
                      "    console.log('‚ùå Access denied - Admin role required');",
                      "} else if (pm.response.code === 404) {",
                      "    console.log('‚ùå Tenant not found');",
                      "} else if (pm.response.code === 401) {",
                      "    console.log('‚ùå Authentication required');",
                      "}"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for getting Google SSO settings",
                      "",
                      "// Validate required variables",
                      "const tenantId = pm.collectionVariables.get('tenantId');",
                      "const accessToken = pm.collectionVariables.get('accessToken');",
                      "",
                      "if (!tenantId) {",
                      "    console.log('‚ö†Ô∏è Warning: tenantId not set. Please register a tenant first.');",
                      "}",
                      "",
                      "if (!accessToken) {",
                      "    console.log('‚ö†Ô∏è Warning: accessToken not set. Please authenticate first.');",
                      "}",
                      "",
                      "console.log('üîß Retrieving Google SSO settings for tenant:', tenantId);"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Update Google SSO Settings",
              "request": {
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text",
                    "description": "Tenant identifier for isolation"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"googleSsoEnabled\": true,\n  \"googleAutoProvision\": false\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/tenants/{{tenantId}}/settings/google",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "tenants",
                    "{{tenantId}}",
                    "settings",
                    "google"
                  ]
                },
                "description": "Update Google SSO configuration for the specified tenant. This endpoint requires admin role authentication and allows partial updates.\n\n**Authentication:** Bearer token required\n**Authorization:** Admin role required\n\n**Required Headers:**\n- `Authorization`: Bearer token\n- `x-tenant-id`: Tenant identifier\n- `Content-Type`: application/json\n\n**Path Parameters:**\n- `id`: Tenant ID (UUID)\n\n**Request Body (all fields optional):**\n- `googleSsoEnabled`: Enable/disable Google SSO for the tenant\n- `googleAutoProvision`: Enable/disable automatic user provisioning\n\n**Response:**\n- `message`: Success message\n- `data`: Updated tenant information with new settings\n\n**Success Response:** 200 OK\n**Error Responses:**\n- 401 Unauthorized: Missing or invalid token\n- 403 Forbidden: Admin role required\n- 404 Not Found: Tenant not found\n- 400 Bad Request: Invalid input data\n\n**Use Cases:**\n- Enable/disable Google SSO for organization\n- Configure auto-provisioning behavior\n- Admin settings management"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for updating Google SSO settings",
                      "",
                      "// Status code validation",
                      "pm.test('Update Google SSO settings returns 200 OK', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "// Response time validation",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                      "});",
                      "",
                      "// Content type validation",
                      "pm.test('Response content type is JSON', function () {",
                      "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                      "});",
                      "",
                      "// Response structure validation",
                      "pm.test('Response has correct structure', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('message');",
                      "    pm.expect(responseJson).to.have.property('data');",
                      "});",
                      "",
                      "// Updated data validation",
                      "pm.test('Updated tenant data is properly structured', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const data = responseJson.data;",
                      "    ",
                      "    pm.expect(data).to.have.property('id');",
                      "    pm.expect(data).to.have.property('name');",
                      "    pm.expect(data).to.have.property('googleSsoEnabled');",
                      "    pm.expect(data).to.have.property('googleAutoProvision');",
                      "    pm.expect(data).to.have.property('updatedAt');",
                      "    ",
                      "    // Validate data types",
                      "    pm.expect(data.googleSsoEnabled).to.be.a('boolean');",
                      "    pm.expect(data.googleAutoProvision).to.be.a('boolean');",
                      "});",
                      "",
                      "// Validate settings were actually updated",
                      "pm.test('Settings were updated correctly', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const requestBody = JSON.parse(pm.request.body.raw);",
                      "    const updatedData = responseJson.data;",
                      "    ",
                      "    // Check if the settings match what was requested",
                      "    if (requestBody.hasOwnProperty('googleSsoEnabled')) {",
                      "        pm.expect(updatedData.googleSsoEnabled).to.equal(requestBody.googleSsoEnabled);",
                      "    }",
                      "    ",
                      "    if (requestBody.hasOwnProperty('googleAutoProvision')) {",
                      "        pm.expect(updatedData.googleAutoProvision).to.equal(requestBody.googleAutoProvision);",
                      "    }",
                      "});",
                      "",
                      "// Validate updatedAt timestamp is recent",
                      "pm.test('UpdatedAt timestamp is recent', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const updatedAt = new Date(responseJson.data.updatedAt);",
                      "    const now = new Date();",
                      "    const timeDiff = now - updatedAt;",
                      "    ",
                      "    // Should be updated within the last 10 seconds",
                      "    pm.expect(timeDiff).to.be.below(10000);",
                      "});",
                      "",
                      "// Log update status",
                      "if (pm.response.code === 200) {",
                      "    const responseJson = pm.response.json();",
                      "    console.log('üîß Google SSO settings updated successfully');",
                      "    console.log('  SSO Enabled:', responseJson.data.googleSsoEnabled);",
                      "    console.log('  Auto Provision:', responseJson.data.googleAutoProvision);",
                      "    console.log('  Updated At:', responseJson.data.updatedAt);",
                      "} else if (pm.response.code === 403) {",
                      "    console.log('‚ùå Access denied - Admin role required');",
                      "} else if (pm.response.code === 404) {",
                      "    console.log('‚ùå Tenant not found');",
                      "} else if (pm.response.code === 401) {",
                      "    console.log('‚ùå Authentication required');",
                      "} else if (pm.response.code === 400) {",
                      "    console.log('‚ùå Bad request - Check input data');",
                      "}"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for updating Google SSO settings",
                      "",
                      "// Validate required variables",
                      "const tenantId = pm.collectionVariables.get('tenantId');",
                      "const accessToken = pm.collectionVariables.get('accessToken');",
                      "",
                      "if (!tenantId) {",
                      "    console.log('‚ö†Ô∏è Warning: tenantId not set. Please register a tenant first.');",
                      "}",
                      "",
                      "if (!accessToken) {",
                      "    console.log('‚ö†Ô∏è Warning: accessToken not set. Please authenticate with admin role first.');",
                      "}",
                      "",
                      "// Log the update request",
                      "const requestBody = JSON.parse(pm.request.body.raw);",
                      "console.log('üîß Updating Google SSO settings for tenant:', tenantId);",
                      "console.log('  New settings:', requestBody);"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Update Google SSO Settings - Enable SSO Only",
              "request": {
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"googleSsoEnabled\": true\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/tenants/{{tenantId}}/settings/google",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "tenants",
                    "{{tenantId}}",
                    "settings",
                    "google"
                  ]
                },
                "description": "Example of partial update - enable Google SSO only without changing auto-provisioning settings. Demonstrates that the PATCH endpoint supports partial updates.\n\n**Use Case:** Enable Google SSO while keeping existing auto-provisioning setting\n**Update Type:** Partial update (only googleSsoEnabled field)"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for partial update",
                      "",
                      "pm.test('Partial update returns 200 OK', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Only specified field was updated', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const updatedData = responseJson.data;",
                      "    ",
                      "    // googleSsoEnabled should be true",
                      "    pm.expect(updatedData.googleSsoEnabled).to.be.true;",
                      "    ",
                      "    // googleAutoProvision should remain unchanged",
                      "    pm.expect(updatedData).to.have.property('googleAutoProvision');",
                      "});",
                      "",
                      "console.log('‚úÖ Partial update (SSO enabled) completed successfully');"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Update Google SSO Settings - Disable All",
              "request": {
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"googleSsoEnabled\": false,\n  \"googleAutoProvision\": false\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/tenants/{{tenantId}}/settings/google",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "tenants",
                    "{{tenantId}}",
                    "settings",
                    "google"
                  ]
                },
                "description": "Example of disabling all Google SSO features for a tenant. This configuration disables both Google SSO and auto-provisioning.\n\n**Use Case:** Completely disable Google integration for security or policy reasons\n**Security Impact:** Users will need to use email/password authentication only"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for disabling Google SSO",
                      "",
                      "pm.test('Google SSO disabled successfully', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Both Google features are disabled', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const updatedData = responseJson.data;",
                      "    ",
                      "    pm.expect(updatedData.googleSsoEnabled).to.be.false;",
                      "    pm.expect(updatedData.googleAutoProvision).to.be.false;",
                      "});",
                      "",
                      "console.log('‚úÖ Google SSO completely disabled');"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Get Google SSO Settings - Unauthorized Example",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/tenants/{{tenantId}}/settings/google",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "tenants",
                    "{{tenantId}}",
                    "settings",
                    "google"
                  ]
                },
                "description": "Example of accessing Google SSO settings without authentication. This request demonstrates security validation and should return a 401 Unauthorized response.\n\n**Expected Response:** 401 Unauthorized\n**Use Case:** Testing authentication requirement enforcement\n**Security Test:** Verify admin endpoints are properly protected"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for unauthorized access",
                      "",
                      "pm.test('Unauthorized access returns 401', function () {",
                      "    pm.expect(pm.response.code).to.equal(401);",
                      "});",
                      "",
                      "pm.test('Error response has proper structure', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('message');",
                      "});",
                      "",
                      "pm.test('No sensitive data in error response', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.not.have.property('googleSsoEnabled');",
                      "    pm.expect(responseJson).to.not.have.property('googleAutoProvision');",
                      "});",
                      "",
                      "console.log('‚úÖ Authentication requirement properly enforced');"
                    ]
                  }
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "üë• User Management",
      "description": "Complete user lifecycle management with roles and permissions",
      "item": [
        {
          "name": "CRUD Operations",
          "description": "Create, read, update, and delete user operations",
          "item": [
            {
              "name": "Get All Users",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text",
                    "description": "Tenant identifier for multi-tenant isolation"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/users",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users"
                  ]
                },
                "description": "Retrieve all users in the current tenant. Requires 'read:user' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token with valid JWT\n- `x-tenant-id`: Tenant identifier\n\n**Required Permissions:** read:user\n\n**Response:**\n- Array of user objects with basic information\n- Each user includes id, email, firstName, lastName, createdAt, updatedAt\n\n**Use Cases:**\n- User management dashboard\n- User selection for role/permission assignment\n- Tenant user overview\n\n**Rate Limiting:** Standard API rate limits apply"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Get All Users",
                      "",
                      "pm.test('Status code is 200', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Response is an array', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.be.an('array');",
                      "});",
                      "",
                      "pm.test('Users have required properties', function () {",
                      "    const responseJson = pm.response.json();",
                      "    if (responseJson.length > 0) {",
                      "        const user = responseJson[0];",
                      "        pm.expect(user).to.have.property('id');",
                      "        pm.expect(user).to.have.property('email');",
                      "        pm.expect(user).to.have.property('createdAt');",
                      "        pm.expect(user).to.have.property('updatedAt');",
                      "        ",
                      "        // Capture first user ID for subsequent tests",
                      "        if (!pm.collectionVariables.get('userId')) {",
                      "            pm.collectionVariables.set('userId', user.id);",
                      "            console.log('‚úÖ User ID captured:', user.id);",
                      "        }",
                      "    }",
                      "});",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                      "});",
                      "",
                      "console.log('üìã Retrieved', pm.response.json().length, 'users');"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Get User by ID",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/users/{{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    "{{userId}}"
                  ]
                },
                "description": "Retrieve a specific user by their ID with detailed information including roles and permissions. Requires 'read:user' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token with valid JWT\n- `x-tenant-id`: Tenant identifier\n\n**Path Parameters:**\n- `id`: User ID (UUID format)\n\n**Required Permissions:** read:user\n\n**Response:**\n- User object with detailed information\n- Includes roles and permissions if available\n\n**Error Responses:**\n- 404: User not found\n- 403: Insufficient permissions\n- 401: Invalid or missing authentication\n\n**Use Cases:**\n- User profile viewing\n- User details for editing\n- Permission verification"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Get User by ID",
                      "",
                      "pm.test('Status code is 200 or 404', function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    pm.test('User object has required properties', function () {",
                      "        const user = pm.response.json();",
                      "        pm.expect(user).to.have.property('id');",
                      "        pm.expect(user).to.have.property('email');",
                      "        pm.expect(user).to.have.property('createdAt');",
                      "        pm.expect(user).to.have.property('updatedAt');",
                      "        ",
                      "        // Verify the ID matches the requested ID",
                      "        const requestedId = pm.collectionVariables.get('userId');",
                      "        pm.expect(user.id).to.equal(requestedId);",
                      "    });",
                      "    ",
                      "    pm.test('User email is valid format', function () {",
                      "        const user = pm.response.json();",
                      "        pm.expect(user.email).to.match(/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/);",
                      "    });",
                      "    ",
                      "    console.log('üë§ User details retrieved for:', pm.response.json().email);",
                      "} else if (pm.response.code === 404) {",
                      "    pm.test('404 response has error message', function () {",
                      "        const responseJson = pm.response.json();",
                      "        pm.expect(responseJson).to.have.property('message');",
                      "    });",
                      "    console.log('‚ùå User not found');",
                      "}",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                      "});"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Get User by ID",
                      "",
                      "const userId = pm.collectionVariables.get('userId');",
                      "if (!userId) {",
                      "    console.log('‚ö†Ô∏è Warning: userId not set. Run \"Get All Users\" first to capture a user ID.');",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Create User",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"newuser@example.com\",\n  \"password\": \"SecurePass123!\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/users",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users"
                  ]
                },
                "description": "Create a new user in the current tenant. Requires 'create:user' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token with valid JWT\n- `x-tenant-id`: Tenant identifier\n- `Content-Type`: application/json\n\n**Request Body:**\n- `email` (required): Valid email address\n- `password` (required): Minimum 8 characters\n- `firstName` (optional): User's first name\n- `lastName` (optional): User's last name\n\n**Required Permissions:** create:user\n\n**Response:**\n- Created user object (password excluded)\n- Includes generated user ID\n\n**Error Responses:**\n- 409: Email already exists\n- 400: Invalid request data\n- 403: Insufficient permissions\n\n**Use Cases:**\n- User registration by admin\n- Bulk user creation\n- Team member invitation"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Create User",
                      "",
                      "pm.test('Status code is 201', function () {",
                      "    pm.expect(pm.response.code).to.equal(201);",
                      "});",
                      "",
                      "pm.test('Created user has required properties', function () {",
                      "    const user = pm.response.json();",
                      "    pm.expect(user).to.have.property('id');",
                      "    pm.expect(user).to.have.property('email');",
                      "    pm.expect(user).to.have.property('createdAt');",
                      "    pm.expect(user).to.have.property('updatedAt');",
                      "    ",
                      "    // Password should not be returned",
                      "    pm.expect(user).to.not.have.property('password');",
                      "});",
                      "",
                      "pm.test('User email matches request', function () {",
                      "    const user = pm.response.json();",
                      "    const requestBody = JSON.parse(pm.request.body.raw);",
                      "    pm.expect(user.email).to.equal(requestBody.email);",
                      "});",
                      "",
                      "// Capture the new user ID for subsequent operations",
                      "pm.test('User ID captured successfully', function () {",
                      "    const user = pm.response.json();",
                      "    if (user.id) {",
                      "        pm.collectionVariables.set('userId', user.id);",
                      "        console.log('‚úÖ New user ID captured:', user.id);",
                      "        console.log('üë§ Created user:', user.email);",
                      "    }",
                      "});",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                      "});"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Create User",
                      "",
                      "// Generate unique email to avoid conflicts",
                      "const timestamp = Date.now();",
                      "const uniqueEmail = `testuser${timestamp}@example.com`;",
                      "",
                      "// Update the request body with unique email",
                      "const requestBody = JSON.parse(pm.request.body.raw);",
                      "requestBody.email = uniqueEmail;",
                      "pm.request.body.raw = JSON.stringify(requestBody, null, 2);",
                      "",
                      "console.log('üîÑ Generated unique email:', uniqueEmail);"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Update User",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"firstName\": \"Jane\",\n  \"lastName\": \"Smith\",\n  \"email\": \"updated@example.com\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/users/{{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    "{{userId}}"
                  ]
                },
                "description": "Update an existing user's information. Requires 'update:user' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token with valid JWT\n- `x-tenant-id`: Tenant identifier\n- `Content-Type`: application/json\n\n**Path Parameters:**\n- `id`: User ID to update\n\n**Request Body (all optional):**\n- `email`: New email address\n- `firstName`: Updated first name\n- `lastName`: Updated last name\n\n**Required Permissions:** update:user\n\n**Response:**\n- Updated user object\n- Includes updated timestamp\n\n**Error Responses:**\n- 404: User not found\n- 409: Email already exists (if changing email)\n- 400: Invalid request data\n- 403: Insufficient permissions\n\n**Use Cases:**\n- Profile updates\n- Administrative user management\n- Contact information changes"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Update User",
                      "",
                      "pm.test('Status code is 200 or 404', function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    pm.test('Updated user has required properties', function () {",
                      "        const user = pm.response.json();",
                      "        pm.expect(user).to.have.property('id');",
                      "        pm.expect(user).to.have.property('email');",
                      "        pm.expect(user).to.have.property('updatedAt');",
                      "    });",
                      "    ",
                      "    pm.test('User data reflects updates', function () {",
                      "        const user = pm.response.json();",
                      "        const requestBody = JSON.parse(pm.request.body.raw);",
                      "        ",
                      "        if (requestBody.firstName) {",
                      "            pm.expect(user.firstName).to.equal(requestBody.firstName);",
                      "        }",
                      "        if (requestBody.lastName) {",
                      "            pm.expect(user.lastName).to.equal(requestBody.lastName);",
                      "        }",
                      "        if (requestBody.email) {",
                      "            pm.expect(user.email).to.equal(requestBody.email);",
                      "        }",
                      "    });",
                      "    ",
                      "    console.log('‚úÖ User updated successfully:', pm.response.json().email);",
                      "} else if (pm.response.code === 404) {",
                      "    console.log('‚ùå User not found for update');",
                      "}",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                      "});"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Update User",
                      "",
                      "const userId = pm.collectionVariables.get('userId');",
                      "if (!userId) {",
                      "    console.log('‚ö†Ô∏è Warning: userId not set. Create a user first or run \"Get All Users\".');",
                      "}",
                      "",
                      "// Generate unique email to avoid conflicts",
                      "const timestamp = Date.now();",
                      "const requestBody = JSON.parse(pm.request.body.raw);",
                      "if (requestBody.email) {",
                      "    requestBody.email = `updated${timestamp}@example.com`;",
                      "    pm.request.body.raw = JSON.stringify(requestBody, null, 2);",
                      "    console.log('üîÑ Generated unique email for update:', requestBody.email);",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Delete User",
              "request": {
                "method": "DELETE",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/users/{{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    "{{userId}}"
                  ]
                },
                "description": "Delete a user and all their role/permission assignments. Requires 'delete:user' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token with valid JWT\n- `x-tenant-id`: Tenant identifier\n\n**Path Parameters:**\n- `id`: User ID to delete\n\n**Required Permissions:** delete:user\n\n**Response:**\n- Success message confirming deletion\n\n**Error Responses:**\n- 404: User not found\n- 403: Insufficient permissions\n- 400: Cannot delete (e.g., last admin user)\n\n**Important Notes:**\n- This action is irreversible\n- All user's role and permission assignments are also deleted\n- User's created content may remain but will be orphaned\n\n**Use Cases:**\n- Employee offboarding\n- Account cleanup\n- Administrative user management"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Delete User",
                      "",
                      "pm.test('Status code is 200 or 404', function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    pm.test('Deletion response has success message', function () {",
                      "        const responseJson = pm.response.json();",
                      "        pm.expect(responseJson).to.have.property('message');",
                      "    });",
                      "    ",
                      "    console.log('‚úÖ User deleted successfully');",
                      "    ",
                      "    // Clear the userId variable since user is deleted",
                      "    pm.collectionVariables.set('userId', '');",
                      "    console.log('üßπ Cleared userId variable');",
                      "} else if (pm.response.code === 404) {",
                      "    console.log('‚ùå User not found for deletion');",
                      "}",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                      "});"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Delete User",
                      "",
                      "const userId = pm.collectionVariables.get('userId');",
                      "if (!userId) {",
                      "    console.log('‚ö†Ô∏è Warning: userId not set. Create a user first or run \"Get All Users\".');",
                      "} else {",
                      "    console.log('üóëÔ∏è Preparing to delete user:', userId);",
                      "}"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "Role Assignment",
          "description": "Assign and manage user roles",
          "item": [
            {
              "name": "Assign Roles to User",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"roleIds\": [\"{{roleId}}\"]\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/users/{{userId}}/roles",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    "{{userId}}",
                    "roles"
                  ]
                },
                "description": "Replace user roles with the provided role IDs. This operation replaces all existing roles. Requires 'update:user' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token with valid JWT\n- `x-tenant-id`: Tenant identifier\n- `Content-Type`: application/json\n\n**Path Parameters:**\n- `id`: User ID to assign roles to\n\n**Request Body:**\n- `roleIds`: Array of role IDs to assign to the user\n\n**Required Permissions:** update:user\n\n**Response:**\n- Updated user object with new role assignments\n- Includes role details if expanded\n\n**Error Responses:**\n- 404: User or role not found\n- 403: Insufficient permissions\n- 400: Invalid role IDs\n\n**Important Notes:**\n- This replaces ALL existing roles\n- To add roles without replacing, use PATCH (if available)\n- Empty array removes all roles\n\n**Use Cases:**\n- Role management by administrators\n- User promotion/demotion\n- Bulk role assignment changes"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Assign Roles to User",
                      "",
                      "pm.test('Status code is 200 or 404', function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    pm.test('Response contains user with roles', function () {",
                      "        const responseJson = pm.response.json();",
                      "        pm.expect(responseJson).to.have.property('id');",
                      "        ",
                      "        // Check if roles are included in response",
                      "        if (responseJson.roles) {",
                      "            pm.expect(responseJson.roles).to.be.an('array');",
                      "            console.log('üë• User now has', responseJson.roles.length, 'role(s)');",
                      "        }",
                      "    });",
                      "    ",
                      "    pm.test('Role assignment reflects request', function () {",
                      "        const requestBody = JSON.parse(pm.request.body.raw);",
                      "        const responseJson = pm.response.json();",
                      "        ",
                      "        if (responseJson.roles && requestBody.roleIds) {",
                      "            // Verify the number of roles matches (if roles are expanded)",
                      "            if (responseJson.roles.length > 0 && typeof responseJson.roles[0] === 'object') {",
                      "                pm.expect(responseJson.roles.length).to.equal(requestBody.roleIds.length);",
                      "            }",
                      "        }",
                      "    });",
                      "    ",
                      "    console.log('‚úÖ Roles assigned successfully to user');",
                      "} else if (pm.response.code === 404) {",
                      "    pm.test('404 response has error message', function () {",
                      "        const responseJson = pm.response.json();",
                      "        pm.expect(responseJson).to.have.property('message');",
                      "    });",
                      "    console.log('‚ùå User or role not found');",
                      "}",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                      "});"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Assign Roles to User",
                      "",
                      "const userId = pm.collectionVariables.get('userId');",
                      "const roleId = pm.collectionVariables.get('roleId');",
                      "",
                      "if (!userId) {",
                      "    console.log('‚ö†Ô∏è Warning: userId not set. Create a user first or run \"Get All Users\".');",
                      "}",
                      "",
                      "if (!roleId) {",
                      "    console.log('‚ö†Ô∏è Warning: roleId not set. Create a role first or set roleId manually.');",
                      "    console.log('üí° Tip: You can set a roleId manually in the environment variables.');",
                      "} else {",
                      "    console.log('üë• Assigning role', roleId, 'to user', userId);",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Assign Multiple Roles Example",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"roleIds\": [\n    \"role-admin-id\",\n    \"role-user-id\",\n    \"role-viewer-id\"\n  ]\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/users/{{userId}}/roles",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    "{{userId}}",
                    "roles"
                  ]
                },
                "description": "Example of assigning multiple roles to a user simultaneously. This demonstrates how to assign multiple roles in a single request.\n\n**Use Case:** Assigning multiple roles to a user who needs various permissions\n**Example Scenario:** A user who needs both admin and viewer roles\n\n**Note:** Replace the role IDs in the request body with actual role IDs from your system."
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for multiple role assignment",
                      "",
                      "pm.test('Multiple roles assigned successfully', function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const requestBody = JSON.parse(pm.request.body.raw);",
                      "    console.log('‚úÖ Assigned', requestBody.roleIds.length, 'roles to user');",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Remove All Roles Example",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"roleIds\": []\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/users/{{userId}}/roles",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    "{{userId}}",
                    "roles"
                  ]
                },
                "description": "Example of removing all roles from a user by providing an empty roleIds array.\n\n**Use Case:** Removing all roles from a user (e.g., during role restructuring)\n**Important:** This will remove ALL roles from the user, potentially affecting their access permissions"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for removing all roles",
                      "",
                      "pm.test('All roles removed successfully', function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    console.log('‚úÖ All roles removed from user');",
                      "}"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "Permission Management",
          "description": "Manage user permissions and view effective permissions",
          "item": [
            {
              "name": "Assign Permissions to User",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"permissionIds\": [\"{{permissionId}}\"]\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/users/{{userId}}/permissions",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    "{{userId}}",
                    "permissions"
                  ]
                },
                "description": "Grant user-specific permissions directly to a user. These permissions are in addition to role-based permissions. Requires 'update:user' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token with valid JWT\n- `x-tenant-id`: Tenant identifier\n- `Content-Type`: application/json\n\n**Path Parameters:**\n- `id`: User ID to assign permissions to\n\n**Request Body:**\n- `permissionIds`: Array of permission IDs to assign directly to the user\n\n**Required Permissions:** update:user\n\n**Response:**\n- Updated user object with new permission assignments\n- May include permission details if expanded\n\n**Error Responses:**\n- 404: User or permission not found\n- 403: Insufficient permissions\n- 400: Invalid permission IDs\n\n**Important Notes:**\n- These are user-specific permissions (not role-based)\n- User-specific permissions are additive to role permissions\n- Use sparingly - prefer role-based permissions for maintainability\n\n**Use Cases:**\n- Temporary permission grants\n- Special access requirements\n- Fine-grained permission control"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Assign Permissions to User",
                      "",
                      "pm.test('Status code is 200 or 404', function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    pm.test('Response contains user with permissions', function () {",
                      "        const responseJson = pm.response.json();",
                      "        pm.expect(responseJson).to.have.property('id');",
                      "        ",
                      "        // Check if permissions are included in response",
                      "        if (responseJson.permissions) {",
                      "            pm.expect(responseJson.permissions).to.be.an('array');",
                      "            console.log('üîê User now has', responseJson.permissions.length, 'direct permission(s)');",
                      "        }",
                      "    });",
                      "    ",
                      "    pm.test('Permission assignment reflects request', function () {",
                      "        const requestBody = JSON.parse(pm.request.body.raw);",
                      "        const responseJson = pm.response.json();",
                      "        ",
                      "        if (responseJson.permissions && requestBody.permissionIds) {",
                      "            // Verify permissions were assigned (if permissions are expanded)",
                      "            if (responseJson.permissions.length > 0 && typeof responseJson.permissions[0] === 'object') {",
                      "                pm.expect(responseJson.permissions.length).to.equal(requestBody.permissionIds.length);",
                      "            }",
                      "        }",
                      "    });",
                      "    ",
                      "    console.log('‚úÖ Permissions assigned successfully to user');",
                      "} else if (pm.response.code === 404) {",
                      "    pm.test('404 response has error message', function () {",
                      "        const responseJson = pm.response.json();",
                      "        pm.expect(responseJson).to.have.property('message');",
                      "    });",
                      "    console.log('‚ùå User or permission not found');",
                      "}",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                      "});"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Assign Permissions to User",
                      "",
                      "const userId = pm.collectionVariables.get('userId');",
                      "const permissionId = pm.collectionVariables.get('permissionId');",
                      "",
                      "if (!userId) {",
                      "    console.log('‚ö†Ô∏è Warning: userId not set. Create a user first or run \"Get All Users\".');",
                      "}",
                      "",
                      "if (!permissionId) {",
                      "    console.log('‚ö†Ô∏è Warning: permissionId not set. Create a permission first or set permissionId manually.');",
                      "    console.log('üí° Tip: You can set a permissionId manually in the environment variables.');",
                      "} else {",
                      "    console.log('üîê Assigning permission', permissionId, 'to user', userId);",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Get User Effective Permissions",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/users/{{userId}}/permissions",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    "{{userId}}",
                    "permissions"
                  ]
                },
                "description": "Get all effective permissions for a user, including both role-based and user-specific permissions. Requires 'read:user' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token with valid JWT\n- `x-tenant-id`: Tenant identifier\n\n**Path Parameters:**\n- `id`: User ID to get permissions for\n\n**Required Permissions:** read:user\n\n**Response:**\n- Array of all effective permissions for the user\n- Includes permissions from roles and direct user assignments\n- May include permission source information (role vs direct)\n\n**Error Responses:**\n- 404: User not found\n- 403: Insufficient permissions\n\n**Response Structure:**\n- Each permission includes: id, name, description, source\n- Source indicates if permission comes from role or direct assignment\n\n**Use Cases:**\n- Permission auditing\n- Access control verification\n- Debugging permission issues\n- Security compliance checks"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Get User Effective Permissions",
                      "",
                      "pm.test('Status code is 200 or 404', function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    pm.test('Response is an array of permissions', function () {",
                      "        const permissions = pm.response.json();",
                      "        pm.expect(permissions).to.be.an('array');",
                      "    });",
                      "    ",
                      "    pm.test('Permissions have required properties', function () {",
                      "        const permissions = pm.response.json();",
                      "        if (permissions.length > 0) {",
                      "            const permission = permissions[0];",
                      "            pm.expect(permission).to.have.property('id');",
                      "            pm.expect(permission).to.have.property('name');",
                      "            ",
                      "            // Log permission details",
                      "            console.log('üîê First permission:', permission.name);",
                      "            if (permission.source) {",
                      "                console.log('üìç Source:', permission.source);",
                      "            }",
                      "        }",
                      "    });",
                      "    ",
                      "    pm.test('Permission analysis', function () {",
                      "        const permissions = pm.response.json();",
                      "        const totalPermissions = permissions.length;",
                      "        ",
                      "        // Count permissions by source if available",
                      "        const rolePermissions = permissions.filter(p => p.source === 'role').length;",
                      "        const directPermissions = permissions.filter(p => p.source === 'direct').length;",
                      "        ",
                      "        console.log('üìä Permission Summary:');",
                      "        console.log('  Total effective permissions:', totalPermissions);",
                      "        if (rolePermissions > 0) console.log('  From roles:', rolePermissions);",
                      "        if (directPermissions > 0) console.log('  Direct assignments:', directPermissions);",
                      "        ",
                      "        // List all permission names",
                      "        const permissionNames = permissions.map(p => p.name).join(', ');",
                      "        console.log('  Permissions:', permissionNames || 'None');",
                      "    });",
                      "    ",
                      "    console.log('‚úÖ Effective permissions retrieved successfully');",
                      "} else if (pm.response.code === 404) {",
                      "    console.log('‚ùå User not found');",
                      "}",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                      "});"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Get User Effective Permissions",
                      "",
                      "const userId = pm.collectionVariables.get('userId');",
                      "if (!userId) {",
                      "    console.log('‚ö†Ô∏è Warning: userId not set. Create a user first or run \"Get All Users\".');",
                      "} else {",
                      "    console.log('üîç Getting effective permissions for user:', userId);",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Assign Multiple Permissions Example",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"permissionIds\": [\n    \"read:user\",\n    \"update:user\",\n    \"read:project\"\n  ]\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/users/{{userId}}/permissions",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    "{{userId}}",
                    "permissions"
                  ]
                },
                "description": "Example of assigning multiple permissions directly to a user. This demonstrates granting specific permissions that may not be covered by the user's roles.\n\n**Use Case:** Granting specific permissions for temporary access or special requirements\n**Example Scenario:** A user who needs read access to users and projects but not full admin rights\n\n**Note:** Replace the permission IDs with actual permission IDs from your system."
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for multiple permission assignment",
                      "",
                      "pm.test('Multiple permissions assigned successfully', function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const requestBody = JSON.parse(pm.request.body.raw);",
                      "    console.log('‚úÖ Assigned', requestBody.permissionIds.length, 'permissions to user');",
                      "    console.log('üîê Permissions:', requestBody.permissionIds.join(', '));",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Remove All User Permissions Example",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"permissionIds\": []\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/users/{{userId}}/permissions",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    "{{userId}}",
                    "permissions"
                  ]
                },
                "description": "Example of removing all direct permissions from a user by providing an empty permissionIds array. The user will still retain permissions from their assigned roles.\n\n**Use Case:** Cleaning up direct permission assignments while keeping role-based permissions\n**Important:** This only removes direct user permissions, not role-based permissions"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for removing all direct permissions",
                      "",
                      "pm.test('All direct permissions removed successfully', function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    console.log('‚úÖ All direct permissions removed from user');",
                      "    console.log('‚ÑπÔ∏è User still retains role-based permissions');",
                      "}"
                    ]
                  }
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "üõ°Ô∏è Role & Permission System",
      "description": "Role-based access control system management",
      "item": [
        {
          "name": "Role Management",
          "description": "Create and manage roles with permission assignments",
          "item": [
            {
              "name": "Get All Roles",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text",
                    "description": "Tenant identifier for role isolation"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/roles",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "roles"
                  ]
                },
                "description": "Retrieve all roles in the current tenant with their associated permissions. Requires 'read:role' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token\n- `x-tenant-id`: Tenant identifier\n\n**Required Permission:** read:role\n\n**Response:**\n- Array of role objects with permissions\n- Each role includes: id, name, description, tenantId, createdAt, updatedAt, permissions\n\n**Use Cases:**\n- List available roles for assignment\n- Role management interface\n- Permission auditing"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Get All Roles",
                      "",
                      "pm.test('Status code is 200', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Response is an array', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.be.an('array');",
                      "});",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                      "});",
                      "",
                      "// Capture first role ID if available",
                      "if (pm.response.code === 200) {",
                      "    const responseJson = pm.response.json();",
                      "    if (responseJson.length > 0) {",
                      "        pm.collectionVariables.set('roleId', responseJson[0].id);",
                      "        console.log('‚úÖ Role ID captured:', responseJson[0].id);",
                      "        console.log('üìã Available roles:', responseJson.map(r => r.name).join(', '));",
                      "    } else {",
                      "        console.log('‚ÑπÔ∏è No roles found in tenant');",
                      "    }",
                      "}",
                      "",
                      "// Validate role structure if roles exist",
                      "if (pm.response.code === 200) {",
                      "    const responseJson = pm.response.json();",
                      "    if (responseJson.length > 0) {",
                      "        pm.test('Role objects have required properties', function () {",
                      "            const role = responseJson[0];",
                      "            pm.expect(role).to.have.property('id');",
                      "            pm.expect(role).to.have.property('name');",
                      "            pm.expect(role).to.have.property('tenantId');",
                      "            pm.expect(role).to.have.property('createdAt');",
                      "            pm.expect(role).to.have.property('updatedAt');",
                      "        });",
                      "    }",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Get Role by ID",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/roles/{{roleId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "roles",
                    "{{roleId}}"
                  ]
                },
                "description": "Retrieve a specific role by ID with its permissions. Requires 'read:role' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token\n- `x-tenant-id`: Tenant identifier\n\n**Path Parameters:**\n- `id`: Role ID\n\n**Required Permission:** read:role\n\n**Response:**\n- Role object with full details and permissions\n\n**Use Cases:**\n- View role details\n- Edit role form population\n- Permission analysis"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Get Role by ID",
                      "",
                      "pm.test('Status code is 200', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Response is a role object', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.be.an('object');",
                      "    pm.expect(responseJson).to.have.property('id');",
                      "    pm.expect(responseJson).to.have.property('name');",
                      "});",
                      "",
                      "pm.test('Role ID matches requested ID', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const requestedId = pm.collectionVariables.get('roleId');",
                      "    pm.expect(responseJson.id).to.equal(requestedId);",
                      "});",
                      "",
                      "pm.test('Role has permissions array', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('permissions');",
                      "    pm.expect(responseJson.permissions).to.be.an('array');",
                      "});",
                      "",
                      "// Log role details",
                      "if (pm.response.code === 200) {",
                      "    const role = pm.response.json();",
                      "    console.log('üé≠ Role Details:');",
                      "    console.log('  Name:', role.name);",
                      "    console.log('  Description:', role.description || 'No description');",
                      "    console.log('  Permissions:', role.permissions?.length || 0);",
                      "    if (role.permissions?.length > 0) {",
                      "        console.log('  Permission names:', role.permissions.map(p => p.name).join(', '));",
                      "    }",
                      "}"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Get Role by ID",
                      "",
                      "const roleId = pm.collectionVariables.get('roleId');",
                      "if (!roleId) {",
                      "    console.log('‚ö†Ô∏è Warning: roleId not set. Run \"Get All Roles\" first to capture a role ID.');",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Create Role",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Content Manager\",\n  \"description\": \"Can manage all content within the tenant\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/roles",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "roles"
                  ]
                },
                "description": "Create a new role in the current tenant. Requires 'create:role' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token\n- `x-tenant-id`: Tenant identifier\n- `Content-Type`: application/json\n\n**Request Body:**\n- `name`: Role name (required, string)\n- `description`: Role description (optional, string)\n\n**Required Permission:** create:role\n\n**Response:**\n- Created role object with generated ID\n\n**Example Role Names:**\n- Admin, Editor, Viewer, Content Manager, Project Manager, Support Agent\n\n**Use Cases:**\n- Create custom roles for organization\n- Set up role-based access control\n- Define permission groups"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Create Role",
                      "",
                      "pm.test('Status code is 201', function () {",
                      "    pm.expect(pm.response.code).to.equal(201);",
                      "});",
                      "",
                      "pm.test('Response contains created role', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.be.an('object');",
                      "    pm.expect(responseJson).to.have.property('id');",
                      "    pm.expect(responseJson).to.have.property('name');",
                      "    pm.expect(responseJson).to.have.property('tenantId');",
                      "});",
                      "",
                      "pm.test('Role name matches request', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const requestBody = JSON.parse(pm.request.body.raw);",
                      "    pm.expect(responseJson.name).to.equal(requestBody.name);",
                      "});",
                      "",
                      "// Capture created role ID",
                      "if (pm.response.code === 201) {",
                      "    const responseJson = pm.response.json();",
                      "    pm.collectionVariables.set('roleId', responseJson.id);",
                      "    console.log('‚úÖ Role created successfully');",
                      "    console.log('üÜî Role ID captured:', responseJson.id);",
                      "    console.log('üé≠ Role name:', responseJson.name);",
                      "}",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Update Role",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Senior Content Manager\",\n  \"description\": \"Senior role with enhanced content management capabilities\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/roles/{{roleId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "roles",
                    "{{roleId}}"
                  ]
                },
                "description": "Update an existing role's name and description. Requires 'update:role' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token\n- `x-tenant-id`: Tenant identifier\n- `Content-Type`: application/json\n\n**Path Parameters:**\n- `id`: Role ID to update\n\n**Request Body:**\n- `name`: New role name (required, string)\n- `description`: New role description (optional, string)\n\n**Required Permission:** update:role\n\n**Response:**\n- Updated role object\n\n**Use Cases:**\n- Rename roles\n- Update role descriptions\n- Role maintenance"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Update Role",
                      "",
                      "pm.test('Status code is 200', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Response contains updated role', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.be.an('object');",
                      "    pm.expect(responseJson).to.have.property('id');",
                      "    pm.expect(responseJson).to.have.property('name');",
                      "});",
                      "",
                      "pm.test('Role name was updated', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const requestBody = JSON.parse(pm.request.body.raw);",
                      "    pm.expect(responseJson.name).to.equal(requestBody.name);",
                      "});",
                      "",
                      "pm.test('Updated timestamp is recent', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const updatedAt = new Date(responseJson.updatedAt);",
                      "    const now = new Date();",
                      "    const timeDiff = now - updatedAt;",
                      "    pm.expect(timeDiff).to.be.below(60000); // Within last minute",
                      "});",
                      "",
                      "// Log update confirmation",
                      "if (pm.response.code === 200) {",
                      "    const role = pm.response.json();",
                      "    console.log('‚úÖ Role updated successfully');",
                      "    console.log('üé≠ New name:', role.name);",
                      "    console.log('üìù Description:', role.description || 'No description');",
                      "}"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Update Role",
                      "",
                      "const roleId = pm.collectionVariables.get('roleId');",
                      "if (!roleId) {",
                      "    console.log('‚ö†Ô∏è Warning: roleId not set. Create a role first or run \"Get All Roles\" to capture an ID.');",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Assign Permissions to Role",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"permissionIds\": [\n    \"{{permissionId}}\"\n  ]\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/roles/{{roleId}}/permissions",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "roles",
                    "{{roleId}}",
                    "permissions"
                  ]
                },
                "description": "Replace all permissions for a role with the provided list. This operation completely replaces the role's permissions. Requires 'update:role' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token\n- `x-tenant-id`: Tenant identifier\n- `Content-Type`: application/json\n\n**Path Parameters:**\n- `id`: Role ID to update permissions for\n\n**Request Body:**\n- `permissionIds`: Array of permission IDs to assign (replaces all existing)\n\n**Required Permission:** update:role\n\n**Response:**\n- Updated role object with new permissions\n\n**Important:** This replaces ALL permissions. To add permissions, include existing ones in the array.\n\n**Use Cases:**\n- Configure role permissions\n- Update access control\n- Permission management"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Assign Permissions to Role",
                      "",
                      "pm.test('Status code is 200', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Response contains role with permissions', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.be.an('object');",
                      "    pm.expect(responseJson).to.have.property('id');",
                      "    pm.expect(responseJson).to.have.property('permissions');",
                      "});",
                      "",
                      "pm.test('Permissions were assigned correctly', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const requestBody = JSON.parse(pm.request.body.raw);",
                      "    const assignedPermissionIds = responseJson.permissions.map(p => p.id);",
                      "    ",
                      "    requestBody.permissionIds.forEach(permId => {",
                      "        pm.expect(assignedPermissionIds).to.include(permId);",
                      "    });",
                      "});",
                      "",
                      "// Log permission assignment results",
                      "if (pm.response.code === 200) {",
                      "    const role = pm.response.json();",
                      "    const requestBody = JSON.parse(pm.request.body.raw);",
                      "    console.log('‚úÖ Permissions assigned successfully');",
                      "    console.log('üé≠ Role:', role.name);",
                      "    console.log('üìã Assigned permissions:', role.permissions.length);",
                      "    console.log('üîë Permission names:', role.permissions.map(p => p.name).join(', '));",
                      "}"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Assign Permissions to Role",
                      "",
                      "const roleId = pm.collectionVariables.get('roleId');",
                      "const permissionId = pm.collectionVariables.get('permissionId');",
                      "",
                      "if (!roleId) {",
                      "    console.log('‚ö†Ô∏è Warning: roleId not set. Create a role first.');",
                      "}",
                      "",
                      "if (!permissionId) {",
                      "    console.log('‚ö†Ô∏è Warning: permissionId not set. Create a permission first or run \"Get All Permissions\".');",
                      "    console.log('üí° Tip: You can manually set permissionId or use multiple permission IDs in the request body.');",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Delete Role",
              "request": {
                "method": "DELETE",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/roles/{{roleId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "roles",
                    "{{roleId}}"
                  ]
                },
                "description": "Delete a role and remove it from all users. This operation is irreversible. Requires 'delete:role' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token\n- `x-tenant-id`: Tenant identifier\n\n**Path Parameters:**\n- `id`: Role ID to delete\n\n**Required Permission:** delete:role\n\n**Response:**\n- Confirmation message\n\n**Important:** This removes the role from all users who have it assigned.\n\n**Use Cases:**\n- Remove obsolete roles\n- Clean up role structure\n- Role lifecycle management"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Delete Role",
                      "",
                      "pm.test('Status code is 200', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Response contains confirmation message', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.be.an('object');",
                      "    // Response structure may vary, check for common success indicators",
                      "    const hasMessage = responseJson.message || responseJson.success || responseJson.deleted;",
                      "    pm.expect(hasMessage).to.exist;",
                      "});",
                      "",
                      "// Clear the deleted role ID",
                      "if (pm.response.code === 200) {",
                      "    console.log('‚úÖ Role deleted successfully');",
                      "    console.log('üßπ Clearing roleId variable');",
                      "    pm.collectionVariables.set('roleId', '');",
                      "}",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                      "});"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Delete Role",
                      "",
                      "const roleId = pm.collectionVariables.get('roleId');",
                      "if (!roleId) {",
                      "    console.log('‚ö†Ô∏è Warning: roleId not set. Create a role first or run \"Get All Roles\" to capture an ID.');",
                      "} else {",
                      "    console.log('üóëÔ∏è About to delete role ID:', roleId);",
                      "    console.log('‚ö†Ô∏è This action is irreversible and will remove the role from all users.');",
                      "}"
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "Permission Management",
          "description": "Create and manage individual permissions",
          "item": [
            {
              "name": "Get All Permissions",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text",
                    "description": "Tenant identifier for permission isolation"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/permissions",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "permissions"
                  ]
                },
                "description": "Retrieve all permissions in the current tenant. Requires 'read:permission' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token\n- `x-tenant-id`: Tenant identifier\n\n**Required Permission:** read:permission\n\n**Response:**\n- Array of permission objects\n- Each permission includes: id, name, description, tenantId, createdAt, updatedAt\n\n**Permission Format:**\n- Permissions follow the format: action:subject\n- Examples: read:user, create:project, delete:role, manage:notifications\n\n**Use Cases:**\n- List available permissions for role assignment\n- Permission management interface\n- Access control auditing"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Get All Permissions",
                      "",
                      "pm.test('Status code is 200', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Response is an array', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.be.an('array');",
                      "});",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                      "});",
                      "",
                      "// Capture first permission ID if available",
                      "if (pm.response.code === 200) {",
                      "    const responseJson = pm.response.json();",
                      "    if (responseJson.length > 0) {",
                      "        pm.collectionVariables.set('permissionId', responseJson[0].id);",
                      "        console.log('‚úÖ Permission ID captured:', responseJson[0].id);",
                      "        console.log('üîë Available permissions:', responseJson.map(p => p.name).join(', '));",
                      "    } else {",
                      "        console.log('‚ÑπÔ∏è No permissions found in tenant');",
                      "    }",
                      "}",
                      "",
                      "// Validate permission structure if permissions exist",
                      "if (pm.response.code === 200) {",
                      "    const responseJson = pm.response.json();",
                      "    if (responseJson.length > 0) {",
                      "        pm.test('Permission objects have required properties', function () {",
                      "            const permission = responseJson[0];",
                      "            pm.expect(permission).to.have.property('id');",
                      "            pm.expect(permission).to.have.property('name');",
                      "            pm.expect(permission).to.have.property('tenantId');",
                      "            pm.expect(permission).to.have.property('createdAt');",
                      "            pm.expect(permission).to.have.property('updatedAt');",
                      "        });",
                      "        ",
                      "        pm.test('Permission names follow action:subject format', function () {",
                      "            const permissions = responseJson;",
                      "            permissions.forEach(permission => {",
                      "                // Check if permission name contains a colon (action:subject format)",
                      "                pm.expect(permission.name).to.match(/^[a-zA-Z_]+:[a-zA-Z_]+$/);",
                      "            });",
                      "        });",
                      "    }",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Create Permission",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"action\": \"manage\",\n  \"subject\": \"reports\",\n  \"description\": \"Can create, read, update, and delete reports\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/permissions",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "permissions"
                  ]
                },
                "description": "Create a new permission in the current tenant. Permissions follow the action:subject format. Requires 'create:permission' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token\n- `x-tenant-id`: Tenant identifier\n- `Content-Type`: application/json\n\n**Request Body:**\n- `action`: Permission action (required, string) - e.g., read, create, update, delete, manage\n- `subject`: Permission subject/resource (required, string) - e.g., user, project, role, notification\n- `description`: Permission description (optional, string)\n\n**Required Permission:** create:permission\n\n**Response:**\n- Created permission object with generated ID\n\n**Permission Examples:**\n- read:user, create:project, update:role, delete:notification\n- manage:reports (combines multiple actions)\n- admin:tenant (administrative access)\n\n**Use Cases:**\n- Define custom permissions for specific resources\n- Create fine-grained access control\n- Set up permission-based authorization"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Create Permission",
                      "",
                      "pm.test('Status code is 201', function () {",
                      "    pm.expect(pm.response.code).to.equal(201);",
                      "});",
                      "",
                      "pm.test('Response contains created permission', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.be.an('object');",
                      "    pm.expect(responseJson).to.have.property('id');",
                      "    pm.expect(responseJson).to.have.property('name');",
                      "    pm.expect(responseJson).to.have.property('tenantId');",
                      "});",
                      "",
                      "pm.test('Permission name follows action:subject format', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const requestBody = JSON.parse(pm.request.body.raw);",
                      "    const expectedName = `${requestBody.action}:${requestBody.subject}`;",
                      "    pm.expect(responseJson.name).to.equal(expectedName);",
                      "});",
                      "",
                      "pm.test('Permission has correct format', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson.name).to.match(/^[a-zA-Z_]+:[a-zA-Z_]+$/);",
                      "});",
                      "",
                      "// Capture created permission ID",
                      "if (pm.response.code === 201) {",
                      "    const responseJson = pm.response.json();",
                      "    pm.collectionVariables.set('permissionId', responseJson.id);",
                      "    console.log('‚úÖ Permission created successfully');",
                      "    console.log('üÜî Permission ID captured:', responseJson.id);",
                      "    console.log('üîë Permission name:', responseJson.name);",
                      "    console.log('üìù Description:', responseJson.description || 'No description');",
                      "}",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Create Permission - Read User Example",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"action\": \"read\",\n  \"subject\": \"user\",\n  \"description\": \"Can view user information and profiles\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/permissions",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "permissions"
                  ]
                },
                "description": "Example of creating a basic read permission for users. This demonstrates the standard permission format and is commonly used in role-based access control.\n\n**Permission Created:** read:user\n**Use Case:** Allow users to view other users' information\n**Common Assignment:** Assigned to most user roles for basic functionality"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Create Permission - Read User Example",
                      "",
                      "pm.test('Status code is 201', function () {",
                      "    pm.expect(pm.response.code).to.equal(201);",
                      "});",
                      "",
                      "pm.test('Permission name is read:user', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson.name).to.equal('read:user');",
                      "});",
                      "",
                      "// Log creation of standard permission",
                      "if (pm.response.code === 201) {",
                      "    console.log('‚úÖ Standard read:user permission created');",
                      "    console.log('üîë This is a commonly used permission for basic user access');",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Create Permission - Invalid Format Example",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"action\": \"\",\n  \"subject\": \"user\",\n  \"description\": \"Invalid permission with empty action\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/permissions",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "permissions"
                  ]
                },
                "description": "Example of invalid permission creation with empty action field. This demonstrates validation error handling.\n\n**Expected Response:** 400 Bad Request\n**Use Case:** Testing input validation and error handling"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Create Permission - Invalid Format Example",
                      "",
                      "pm.test('Status code is 400 for invalid input', function () {",
                      "    pm.expect(pm.response.code).to.equal(400);",
                      "});",
                      "",
                      "pm.test('Error response has proper structure', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('message');",
                      "});",
                      "",
                      "pm.test('Error message mentions validation', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const message = responseJson.message.toLowerCase();",
                      "    const hasValidationError = message.includes('validation') || ",
                      "                               message.includes('required') || ",
                      "                               message.includes('empty') ||",
                      "                               message.includes('action');",
                      "    pm.expect(hasValidationError).to.be.true;",
                      "});",
                      "",
                      "console.log('‚úÖ Validation error properly handled for empty action field');"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Delete Permission",
              "request": {
                "method": "DELETE",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/permissions/{{permissionId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "permissions",
                    "{{permissionId}}"
                  ]
                },
                "description": "Delete a permission and remove it from all roles and users. This operation is irreversible. Requires 'delete:permission' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token\n- `x-tenant-id`: Tenant identifier\n\n**Path Parameters:**\n- `id`: Permission ID to delete\n\n**Required Permission:** delete:permission\n\n**Response:**\n- Confirmation message with deleted permission ID\n\n**Important:** This removes the permission from all roles and users who have it assigned.\n\n**Use Cases:**\n- Remove obsolete permissions\n- Clean up permission structure\n- Permission lifecycle management\n- Security cleanup"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Delete Permission",
                      "",
                      "pm.test('Status code is 200', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Response contains confirmation message', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.be.an('object');",
                      "    // Check for common success indicators",
                      "    const hasConfirmation = responseJson.message || ",
                      "                           responseJson.success || ",
                      "                           responseJson.deletedPermissionId;",
                      "    pm.expect(hasConfirmation).to.exist;",
                      "});",
                      "",
                      "pm.test('Deleted permission ID is included in response', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const requestedId = pm.collectionVariables.get('permissionId');",
                      "    ",
                      "    // Check if the response includes the deleted permission ID",
                      "    const hasDeletedId = responseJson.deletedPermissionId === requestedId ||",
                      "                         responseJson.id === requestedId ||",
                      "                         (responseJson.message && responseJson.message.includes(requestedId));",
                      "    pm.expect(hasDeletedId).to.be.true;",
                      "});",
                      "",
                      "// Clear the deleted permission ID",
                      "if (pm.response.code === 200) {",
                      "    console.log('‚úÖ Permission deleted successfully');",
                      "    console.log('üßπ Clearing permissionId variable');",
                      "    pm.collectionVariables.set('permissionId', '');",
                      "}",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                      "});"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Delete Permission",
                      "",
                      "const permissionId = pm.collectionVariables.get('permissionId');",
                      "if (!permissionId) {",
                      "    console.log('‚ö†Ô∏è Warning: permissionId not set. Create a permission first or run \"Get All Permissions\" to capture an ID.');",
                      "} else {",
                      "    console.log('üóëÔ∏è About to delete permission ID:', permissionId);",
                      "    console.log('‚ö†Ô∏è This action is irreversible and will remove the permission from all roles and users.');",
                      "}"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Permission Validation Suite",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"action\": \"validate\",\n  \"subject\": \"permissions\",\n  \"description\": \"Test permission for validation suite\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/permissions",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "permissions"
                  ]
                },
                "description": "Comprehensive permission validation suite that tests multiple aspects of permission creation including format validation, tenant isolation, and security checks.\n\n**Validation Coverage:**\n- Permission name format validation\n- Tenant isolation verification\n- Duplicate permission handling\n- Response structure validation\n- Security header checks\n\n**Use Case:** Complete permission system validation and security testing"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Comprehensive Permission Validation Suite",
                      "",
                      "// Basic response validation",
                      "pm.test('Permission creation response is valid', function () {",
                      "    pm.expect(pm.response.code).to.be.oneOf([201, 409]); // Created or conflict",
                      "});",
                      "",
                      "// Format validation for successful creation",
                      "if (pm.response.code === 201) {",
                      "    pm.test('Permission format validation', function () {",
                      "        const responseJson = pm.response.json();",
                      "        const requestBody = JSON.parse(pm.request.body.raw);",
                      "        ",
                      "        // Validate permission name format",
                      "        const expectedName = `${requestBody.action}:${requestBody.subject}`;",
                      "        pm.expect(responseJson.name).to.equal(expectedName);",
                      "        ",
                      "        // Validate action:subject pattern",
                      "        pm.expect(responseJson.name).to.match(/^[a-zA-Z_]+:[a-zA-Z_]+$/);",
                      "        ",
                      "        console.log('‚úÖ Permission format validation passed');",
                      "        console.log('üîë Permission name:', responseJson.name);",
                      "    });",
                      "    ",
                      "    pm.test('Tenant isolation validation', function () {",
                      "        const responseJson = pm.response.json();",
                      "        const currentTenantId = pm.collectionVariables.get('tenantId');",
                      "        ",
                      "        // Verify permission belongs to current tenant",
                      "        pm.expect(responseJson.tenantId).to.equal(currentTenantId);",
                      "        ",
                      "        console.log('‚úÖ Tenant isolation validated');",
                      "        console.log('üè¢ Tenant ID:', responseJson.tenantId);",
                      "    });",
                      "    ",
                      "    pm.test('Permission metadata validation', function () {",
                      "        const responseJson = pm.response.json();",
                      "        ",
                      "        // Check required fields",
                      "        pm.expect(responseJson).to.have.property('id');",
                      "        pm.expect(responseJson).to.have.property('name');",
                      "        pm.expect(responseJson).to.have.property('tenantId');",
                      "        pm.expect(responseJson).to.have.property('createdAt');",
                      "        pm.expect(responseJson).to.have.property('updatedAt');",
                      "        ",
                      "        // Validate timestamps",
                      "        const createdAt = new Date(responseJson.createdAt);",
                      "        const updatedAt = new Date(responseJson.updatedAt);",
                      "        pm.expect(createdAt.getTime()).to.be.a('number');",
                      "        pm.expect(updatedAt.getTime()).to.be.a('number');",
                      "        ",
                      "        console.log('‚úÖ Permission metadata validation passed');",
                      "    });",
                      "    ",
                      "    // Capture permission for cleanup",
                      "    const responseJson = pm.response.json();",
                      "    pm.collectionVariables.set('permissionId', responseJson.id);",
                      "    console.log('üÜî Permission ID captured for validation suite:', responseJson.id);",
                      "}",
                      "",
                      "// Conflict handling validation",
                      "if (pm.response.code === 409) {",
                      "    pm.test('Duplicate permission handling', function () {",
                      "        const responseJson = pm.response.json();",
                      "        pm.expect(responseJson).to.have.property('message');",
                      "        ",
                      "        const message = responseJson.message.toLowerCase();",
                      "        const hasConflictInfo = message.includes('exists') || ",
                      "                               message.includes('duplicate') || ",
                      "                               message.includes('conflict');",
                      "        pm.expect(hasConflictInfo).to.be.true;",
                      "        ",
                      "        console.log('‚úÖ Duplicate permission properly rejected');",
                      "    });",
                      "}",
                      "",
                      "// Security validation",
                      "pm.test('Security headers validation', function () {",
                      "    const headers = pm.response.headers;",
                      "    ",
                      "    // Content-Type should be JSON",
                      "    pm.expect(headers.get('Content-Type')).to.include('application/json');",
                      "    ",
                      "    console.log('üîí Security headers validated');",
                      "});",
                      "",
                      "// Performance validation",
                      "pm.test('Permission creation performance', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                      "    ",
                      "    if (pm.response.responseTime > 1000) {",
                      "        console.log('‚ö†Ô∏è Warning: Permission creation took longer than 1 second');",
                      "    } else {",
                      "        console.log('‚ö° Permission creation performance is good');",
                      "    }",
                      "});",
                      "",
                      "// Overall validation summary",
                      "console.log('üìä Permission Validation Suite Summary:');",
                      "console.log('  Status:', pm.response.status);",
                      "console.log('  Response Time:', pm.response.responseTime + 'ms');",
                      "console.log('  Content Length:', pm.response.headers.get('Content-Length') || 'Unknown');"
                    ]
                  }
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "üìÅ Project Management",
      "description": "Project lifecycle management within tenant context",
      "item": [
        {
          "name": "CRUD Operations",
          "description": "Complete project management operations",
          "item": [
            {
              "name": "Get All Projects",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text",
                    "description": "Tenant identifier - required for tenant isolation"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/projects",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "projects"
                  ]
                },
                "description": "Retrieve all projects in the current tenant. Requires 'read:project' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token with valid JWT\n- `x-tenant-id`: Tenant identifier\n\n**Required Permissions:** read:project\n\n**Response:**\n- Array of project objects with basic information\n- Each project includes id, name, description, ownerId, createdAt, updatedAt\n\n**Rate Limiting:** Standard API rate limits apply\n\n**Example Scenarios:**\n- Valid request: Returns 200 with projects array\n- No projects: Returns 200 with empty array\n- Missing permission: Returns 403 Forbidden\n- Invalid token: Returns 401 Unauthorized"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Get All Projects",
                      "",
                      "pm.test('Status code is 200', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                      "});",
                      "",
                      "pm.test('Response is JSON array', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.be.an('array');",
                      "});",
                      "",
                      "pm.test('Projects have required fields', function () {",
                      "    const responseJson = pm.response.json();",
                      "    if (responseJson.length > 0) {",
                      "        const project = responseJson[0];",
                      "        pm.expect(project).to.have.property('id');",
                      "        pm.expect(project).to.have.property('name');",
                      "        pm.expect(project).to.have.property('ownerId');",
                      "        pm.expect(project).to.have.property('createdAt');",
                      "        pm.expect(project).to.have.property('updatedAt');",
                      "        ",
                      "        // Capture first project ID for subsequent tests",
                      "        pm.collectionVariables.set('projectId', project.id);",
                      "        console.log('‚úÖ Project ID captured:', project.id);",
                      "    }",
                      "});",
                      "",
                      "console.log('üìÅ Projects retrieved:', pm.response.json().length);"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Get All Projects",
                      "",
                      "// Validate required variables",
                      "const accessToken = pm.collectionVariables.get('accessToken');",
                      "const tenantId = pm.collectionVariables.get('tenantId');",
                      "",
                      "if (!accessToken) {",
                      "    console.log('‚ö†Ô∏è Warning: accessToken not set. Please authenticate first.');",
                      "}",
                      "",
                      "if (!tenantId) {",
                      "    console.log('‚ö†Ô∏è Warning: tenantId not set. Please set tenant context first.');",
                      "}",
                      "",
                      "console.log('üìÅ Fetching all projects for tenant:', tenantId);"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Get Project by ID",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text",
                    "description": "Tenant identifier - required for tenant isolation"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/projects/{{projectId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "projects",
                    "{{projectId}}"
                  ]
                },
                "description": "Retrieve a specific project by its ID with detailed information. Requires 'read:project' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token with valid JWT\n- `x-tenant-id`: Tenant identifier\n\n**Path Parameters:**\n- `id`: Project ID (UUID format)\n\n**Required Permissions:** read:project\n\n**Response:**\n- Project object with detailed information\n- Includes id, name, description, ownerId, createdAt, updatedAt\n- May include owner information if populated\n\n**Example Scenarios:**\n- Valid project ID: Returns 200 with project details\n- Project not found: Returns 404 Not Found\n- Project in different tenant: Returns 404 Not Found (tenant isolation)\n- Missing permission: Returns 403 Forbidden\n- Invalid token: Returns 401 Unauthorized"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Get Project by ID",
                      "",
                      "pm.test('Status code is 200', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                      "});",
                      "",
                      "pm.test('Response contains project details', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.be.an('object');",
                      "    pm.expect(responseJson).to.have.property('id');",
                      "    pm.expect(responseJson).to.have.property('name');",
                      "    pm.expect(responseJson).to.have.property('ownerId');",
                      "    pm.expect(responseJson).to.have.property('createdAt');",
                      "    pm.expect(responseJson).to.have.property('updatedAt');",
                      "});",
                      "",
                      "pm.test('Project ID matches requested ID', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const requestedId = pm.collectionVariables.get('projectId');",
                      "    pm.expect(responseJson.id).to.equal(requestedId);",
                      "});",
                      "",
                      "console.log('üìÅ Project details retrieved for ID:', pm.response.json().id);"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Get Project by ID",
                      "",
                      "// Validate required variables",
                      "const accessToken = pm.collectionVariables.get('accessToken');",
                      "const tenantId = pm.collectionVariables.get('tenantId');",
                      "const projectId = pm.collectionVariables.get('projectId');",
                      "",
                      "if (!accessToken) {",
                      "    console.log('‚ö†Ô∏è Warning: accessToken not set. Please authenticate first.');",
                      "}",
                      "",
                      "if (!tenantId) {",
                      "    console.log('‚ö†Ô∏è Warning: tenantId not set. Please set tenant context first.');",
                      "}",
                      "",
                      "if (!projectId) {",
                      "    console.log('‚ö†Ô∏è Warning: projectId not set. Please create a project or get all projects first.');",
                      "    console.log('üí° Tip: Run \"Get All Projects\" first to capture a project ID');",
                      "}",
                      "",
                      "console.log('üìÅ Fetching project details for ID:', projectId);"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Create Project",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text",
                    "description": "Tenant identifier - required for tenant isolation"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Sample Project\",\n  \"description\": \"This is a sample project for testing the API endpoints. It demonstrates project creation with proper metadata and owner assignment.\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/projects",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "projects"
                  ]
                },
                "description": "Create a new project in the current tenant. The authenticated user will be automatically set as the project owner. Requires 'create:project' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token with valid JWT\n- `x-tenant-id`: Tenant identifier\n- `Content-Type`: application/json\n\n**Required Permissions:** create:project\n\n**Request Body:**\n- `name`: Project name (required, string, 1-100 characters)\n- `description`: Project description (optional, string, max 500 characters)\n\n**Response:**\n- Created project object with generated ID\n- Includes id, name, description, ownerId (current user), createdAt, updatedAt\n\n**Owner Assignment:**\n- The current authenticated user is automatically assigned as the project owner\n- Owner has full permissions on the project\n\n**Example Scenarios:**\n- Valid request: Returns 201 with created project\n- Missing name: Returns 400 Bad Request\n- Name too long: Returns 400 Bad Request\n- Missing permission: Returns 403 Forbidden\n- Invalid token: Returns 401 Unauthorized"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Create Project",
                      "",
                      "pm.test('Status code is 201', function () {",
                      "    pm.expect(pm.response.code).to.equal(201);",
                      "});",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                      "});",
                      "",
                      "pm.test('Response contains created project', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.be.an('object');",
                      "    pm.expect(responseJson).to.have.property('id');",
                      "    pm.expect(responseJson).to.have.property('name');",
                      "    pm.expect(responseJson).to.have.property('ownerId');",
                      "    pm.expect(responseJson).to.have.property('createdAt');",
                      "    pm.expect(responseJson).to.have.property('updatedAt');",
                      "});",
                      "",
                      "pm.test('Project name matches request', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const requestBody = JSON.parse(pm.request.body.raw);",
                      "    pm.expect(responseJson.name).to.equal(requestBody.name);",
                      "});",
                      "",
                      "pm.test('Owner is current user', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const currentUserId = pm.collectionVariables.get('userId');",
                      "    if (currentUserId) {",
                      "        pm.expect(responseJson.ownerId).to.equal(currentUserId);",
                      "    }",
                      "});",
                      "",
                      "// Capture project ID for subsequent tests",
                      "pm.test('Project ID captured successfully', function () {",
                      "    const responseJson = pm.response.json();",
                      "    if (responseJson.id) {",
                      "        pm.collectionVariables.set('projectId', responseJson.id);",
                      "        console.log('‚úÖ Project ID captured:', responseJson.id);",
                      "        console.log('üìÅ Project created:', responseJson.name);",
                      "    }",
                      "});",
                      "",
                      "console.log('üìÅ Project creation completed successfully');"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Create Project",
                      "",
                      "// Validate required variables",
                      "const accessToken = pm.collectionVariables.get('accessToken');",
                      "const tenantId = pm.collectionVariables.get('tenantId');",
                      "",
                      "if (!accessToken) {",
                      "    console.log('‚ö†Ô∏è Warning: accessToken not set. Please authenticate first.');",
                      "}",
                      "",
                      "if (!tenantId) {",
                      "    console.log('‚ö†Ô∏è Warning: tenantId not set. Please set tenant context first.');",
                      "}",
                      "",
                      "// Generate unique project name for testing",
                      "const timestamp = new Date().toISOString().slice(0, 19).replace(/[-:]/g, '');",
                      "const projectName = `Test Project ${timestamp}`;",
                      "",
                      "// Update request body with unique name",
                      "const requestBody = JSON.parse(pm.request.body.raw);",
                      "requestBody.name = projectName;",
                      "pm.request.body.raw = JSON.stringify(requestBody, null, 2);",
                      "",
                      "console.log('üìÅ Creating project:', projectName);"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Update Project",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text",
                    "description": "Tenant identifier - required for tenant isolation"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Updated Project Name\",\n  \"description\": \"This project has been updated with new information. The description now includes additional details about the project scope and objectives.\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/projects/{{projectId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "projects",
                    "{{projectId}}"
                  ]
                },
                "description": "Update an existing project's details. Supports partial updates - only provided fields will be updated. Requires 'update:project' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token with valid JWT\n- `x-tenant-id`: Tenant identifier\n- `Content-Type`: application/json\n\n**Path Parameters:**\n- `id`: Project ID (UUID format)\n\n**Required Permissions:** update:project\n\n**Request Body (all fields optional):**\n- `name`: Updated project name (string, 1-100 characters)\n- `description`: Updated project description (string, max 500 characters)\n\n**Response:**\n- Updated project object with new values\n- Includes id, name, description, ownerId, createdAt, updatedAt\n- updatedAt timestamp reflects the update time\n\n**Partial Updates:**\n- Only provided fields are updated\n- Omitted fields retain their current values\n- Empty strings are treated as valid updates\n\n**Example Scenarios:**\n- Valid update: Returns 200 with updated project\n- Project not found: Returns 404 Not Found\n- Project in different tenant: Returns 404 Not Found (tenant isolation)\n- Invalid field values: Returns 400 Bad Request\n- Missing permission: Returns 403 Forbidden\n- Invalid token: Returns 401 Unauthorized"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Update Project",
                      "",
                      "pm.test('Status code is 200', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                      "});",
                      "",
                      "pm.test('Response contains updated project', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.be.an('object');",
                      "    pm.expect(responseJson).to.have.property('id');",
                      "    pm.expect(responseJson).to.have.property('name');",
                      "    pm.expect(responseJson).to.have.property('updatedAt');",
                      "});",
                      "",
                      "pm.test('Project fields updated correctly', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const requestBody = JSON.parse(pm.request.body.raw);",
                      "    ",
                      "    // Check if provided fields were updated",
                      "    if (requestBody.name) {",
                      "        pm.expect(responseJson.name).to.equal(requestBody.name);",
                      "    }",
                      "    if (requestBody.description) {",
                      "        pm.expect(responseJson.description).to.equal(requestBody.description);",
                      "    }",
                      "});",
                      "",
                      "pm.test('Project ID remains unchanged', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const originalId = pm.collectionVariables.get('projectId');",
                      "    pm.expect(responseJson.id).to.equal(originalId);",
                      "});",
                      "",
                      "pm.test('UpdatedAt timestamp is recent', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const updatedAt = new Date(responseJson.updatedAt);",
                      "    const now = new Date();",
                      "    const timeDiff = now - updatedAt;",
                      "    ",
                      "    // Should be updated within the last 10 seconds",
                      "    pm.expect(timeDiff).to.be.below(10000);",
                      "});",
                      "",
                      "console.log('üìÅ Project updated successfully:', pm.response.json().name);"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Update Project",
                      "",
                      "// Validate required variables",
                      "const accessToken = pm.collectionVariables.get('accessToken');",
                      "const tenantId = pm.collectionVariables.get('tenantId');",
                      "const projectId = pm.collectionVariables.get('projectId');",
                      "",
                      "if (!accessToken) {",
                      "    console.log('‚ö†Ô∏è Warning: accessToken not set. Please authenticate first.');",
                      "}",
                      "",
                      "if (!tenantId) {",
                      "    console.log('‚ö†Ô∏è Warning: tenantId not set. Please set tenant context first.');",
                      "}",
                      "",
                      "if (!projectId) {",
                      "    console.log('‚ö†Ô∏è Warning: projectId not set. Please create a project first.');",
                      "    console.log('üí° Tip: Run \"Create Project\" first to get a project ID');",
                      "}",
                      "",
                      "// Add timestamp to make the update unique",
                      "const timestamp = new Date().toISOString().slice(0, 19).replace(/[-:]/g, '');",
                      "const requestBody = JSON.parse(pm.request.body.raw);",
                      "requestBody.name = `Updated Project ${timestamp}`;",
                      "pm.request.body.raw = JSON.stringify(requestBody, null, 2);",
                      "",
                      "console.log('üìÅ Updating project ID:', projectId);"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Delete Project",
              "request": {
                "method": "DELETE",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text",
                    "description": "Tenant identifier - required for tenant isolation"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/projects/{{projectId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "projects",
                    "{{projectId}}"
                  ]
                },
                "description": "Delete an existing project permanently. This action cannot be undone. Requires 'delete:project' permission.\n\n**Required Headers:**\n- `Authorization`: Bearer token with valid JWT\n- `x-tenant-id`: Tenant identifier\n\n**Path Parameters:**\n- `id`: Project ID (UUID format)\n\n**Required Permissions:** delete:project\n\n**Response:**\n- Success confirmation message\n- HTTP 200 status code\n\n**Important Notes:**\n- This operation is permanent and cannot be undone\n- All project-related data may be affected\n- Consider backing up important project data before deletion\n- Tenant isolation ensures only projects within the current tenant can be deleted\n\n**Example Scenarios:**\n- Valid deletion: Returns 200 with success message\n- Project not found: Returns 404 Not Found\n- Project in different tenant: Returns 404 Not Found (tenant isolation)\n- Missing permission: Returns 403 Forbidden\n- Invalid token: Returns 401 Unauthorized"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for Delete Project",
                      "",
                      "pm.test('Status code is 200', function () {",
                      "    pm.expect(pm.response.code).to.equal(200);",
                      "});",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                      "});",
                      "",
                      "pm.test('Response confirms deletion', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.be.an('object');",
                      "    // Response should indicate successful deletion",
                      "    const responseText = JSON.stringify(responseJson).toLowerCase();",
                      "    const hasSuccessIndicator = responseText.includes('success') || ",
                      "                               responseText.includes('deleted') || ",
                      "                               responseText.includes('removed');",
                      "    pm.expect(hasSuccessIndicator).to.be.true;",
                      "});",
                      "",
                      "// Clear the project ID since it's been deleted",
                      "pm.test('Project ID cleared after deletion', function () {",
                      "    pm.collectionVariables.set('projectId', '');",
                      "    console.log('üóëÔ∏è Project ID cleared from variables');",
                      "});",
                      "",
                      "console.log('üóëÔ∏è Project deleted successfully');"
                    ]
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Pre-request script for Delete Project",
                      "",
                      "// Validate required variables",
                      "const accessToken = pm.collectionVariables.get('accessToken');",
                      "const tenantId = pm.collectionVariables.get('tenantId');",
                      "const projectId = pm.collectionVariables.get('projectId');",
                      "",
                      "if (!accessToken) {",
                      "    console.log('‚ö†Ô∏è Warning: accessToken not set. Please authenticate first.');",
                      "}",
                      "",
                      "if (!tenantId) {",
                      "    console.log('‚ö†Ô∏è Warning: tenantId not set. Please set tenant context first.');",
                      "}",
                      "",
                      "if (!projectId) {",
                      "    console.log('‚ö†Ô∏è Warning: projectId not set. Please create a project first.');",
                      "    console.log('üí° Tip: Run \"Create Project\" first to get a project ID');",
                      "}",
                      "",
                      "console.log('üóëÔ∏è Deleting project ID:', projectId);",
                      "console.log('‚ö†Ô∏è Warning: This action cannot be undone!');"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Create Project - Validation Examples",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}",
                    "type": "text"
                  },
                  {
                    "key": "x-tenant-id",
                    "value": "{{tenantId}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"\",\n  \"description\": \"This request demonstrates validation by providing an empty name, which should trigger a 400 Bad Request response.\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/projects",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "projects"
                  ]
                },
                "description": "Example of project creation with invalid data to demonstrate validation handling. This request uses an empty name which should trigger validation errors.\n\n**Expected Response:** 400 Bad Request\n**Use Case:** Testing input validation and error handling\n\n**Validation Rules Tested:**\n- Name is required (cannot be empty)\n- Name length validation\n- Field type validation\n\n**Other Validation Examples:**\n- Try with name longer than 100 characters\n- Try with invalid data types\n- Try with missing required fields"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// Test script for validation example",
                      "",
                      "pm.test('Validation error returns 400 Bad Request', function () {",
                      "    pm.expect(pm.response.code).to.equal(400);",
                      "});",
                      "",
                      "pm.test('Error response has validation message', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('message');",
                      "    ",
                      "    // Should mention validation or name requirement",
                      "    const message = responseJson.message.toLowerCase();",
                      "    const hasValidationInfo = message.includes('name') || ",
                      "                             message.includes('required') || ",
                      "                             message.includes('validation');",
                      "    pm.expect(hasValidationInfo).to.be.true;",
                      "});",
                      "",
                      "pm.test('No project created on validation error', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.not.have.property('id');",
                      "});",
                      "",
                      "console.log('‚úÖ Validation error properly handled');"
                    ]
                  }
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "üîî Notification System",
      "description": "Comprehensive notification system with preferences and broadcasting",
      "item": [
        {
          "name": "Notification CRUD",
          "description": "Create, read, update, and delete notifications",
          "item": []
        },
        {
          "name": "Notification Preferences",
          "description": "Manage user notification preferences by category and channel",
          "item": []
        },
        {
          "name": "Broadcasting",
          "description": "Tenant-wide notification broadcasting (admin only)",
          "item": []
        },
        {
          "name": "Privacy Controls",
          "description": "Notification privacy and visibility controls",
          "item": []
        }
      ]
    },
    {
      "name": "üìä System Monitoring",
      "description": "System health monitoring and alerting (admin access required)",
      "item": [
        {
          "name": "Queue Monitoring",
          "description": "Monitor notification queues and processing statistics",
          "item": []
        },
        {
          "name": "Alert Management",
          "description": "Configure and manage system alerts",
          "item": []
        },
        {
          "name": "Health Checks",
          "description": "Detailed system health and component status checks",
          "item": []
        }
      ]
    }
  ]
}