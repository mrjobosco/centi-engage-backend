{
  "info": {
    "_postman_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "name": "Multi-Tenant NestJS API - Comprehensive Collection",
    "description": "Complete API collection for the Multi-Tenant NestJS Starter with Google OAuth, Notifications, Monitoring, and all system endpoints. This collection includes comprehensive test scripts, environment variable management, and realistic examples for all API functionality.\n\n## Features Covered:\n- Complete Authentication flows (Basic + Google OAuth)\n- Tenant Management with Google SSO settings\n- User, Role, and Permission Management\n- Project Management\n- Comprehensive Notification System\n- Health Checks and System Monitoring\n- Proper tenant isolation and security\n\n## Usage:\n1. Set up your environment variables (baseUrl, etc.)\n2. Start with tenant registration or use existing tenant\n3. Authenticate to get access token\n4. Use any endpoint with proper authentication\n\n## Environment Variables:\nAll necessary variables are automatically captured during API interactions.",
    "version": "2.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{accessToken}}",
        "type": "string"
      }
    ]
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global pre-request script for common setup",
          "// Ensure tenant header is set for authenticated requests",
          "if (pm.collectionVariables.get('tenantId') && !pm.request.headers.has('x-tenant-id')) {",
          "    pm.request.headers.add({",
          "        key: 'x-tenant-id',",
          "        value: pm.collectionVariables.get('tenantId')",
          "    });",
          "}",
          "",
          "// Set common headers",
          "pm.request.headers.add({",
          "    key: 'User-Agent',",
          "    value: 'Postman-Collection/2.0.0'",
          "});",
          "",
          "// Log request for debugging",
          "console.log(`Making ${pm.request.method} request to: ${pm.request.url}`);"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test script for common validations",
          "pm.test('Response time is acceptable', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "pm.test('Response has proper content type', function () {",
          "    const contentType = pm.response.headers.get('Content-Type');",
          "    if (contentType) {",
          "        pm.expect(contentType).to.include('application/json');",
          "    }",
          "});",
          "",
          "// Log response status for debugging",
          "console.log(`Response status: ${pm.response.status} (${pm.response.code})`);"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/api",
      "type": "string",
      "description": "Base URL for the API (development: http://localhost:3000/api, production: update as needed)"
    },
    {
      "key": "tenantId",
      "value": "",
      "type": "string",
      "description": "Current tenant identifier - automatically captured during tenant registration or login"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "string",
      "description": "JWT authentication token - automatically captured during login"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string",
      "description": "Current user ID - automatically captured during user operations"
    },
    {
      "key": "roleId",
      "value": "",
      "type": "string",
      "description": "Role ID for testing role operations - automatically captured during role creation"
    },
    {
      "key": "permissionId",
      "value": "",
      "type": "string",
      "description": "Permission ID for testing permission operations - automatically captured during permission creation"
    },
    {
      "key": "projectId",
      "value": "",
      "type": "string",
      "description": "Project ID for testing project operations - automatically captured during project creation"
    },
    {
      "key": "notificationId",
      "value": "",
      "type": "string",
      "description": "Notification ID for testing notification operations - automatically captured during notification creation"
    },
    {
      "key": "googleAuthUrl",
      "value": "",
      "type": "string",
      "description": "Google OAuth authorization URL - automatically captured during OAuth initiation"
    },
    {
      "key": "googleState",
      "value": "",
      "type": "string",
      "description": "Google OAuth state parameter - automatically captured during OAuth flow"
    },
    {
      "key": "googleCode",
      "value": "",
      "type": "string",
      "description": "Google OAuth authorization code - manually set from OAuth callback"
    },
    {
      "key": "refreshToken",
      "value": "",
      "type": "string",
      "description": "JWT refresh token - automatically captured when available"
    },
    {
      "key": "adminUserId",
      "value": "",
      "type": "string",
      "description": "Admin user ID for testing admin operations - automatically captured during tenant registration"
    },
    {
      "key": "testEmail",
      "value": "test@example.com",
      "type": "string",
      "description": "Test email address for user operations"
    },
    {
      "key": "testPassword",
      "value": "TestPass123!",
      "type": "string",
      "description": "Test password for user operations"
    }
  ],
  "item": [
    {
      "name": "üè• Environment Setup",
      "description": "Initial setup and health check endpoints to verify system status before testing",
      "item": [
        {
          "name": "Health Checks",
          "description": "Basic health check endpoints to verify system components",
          "item": []
        },
        {
          "name": "Configuration Tests",
          "description": "Test environment configuration and connectivity",
          "item": []
        }
      ]
    },
    {
      "name": "üîê Authentication",
      "description": "Complete authentication flows including basic auth and Google OAuth integration",
      "item": [
        {
          "name": "Basic Auth",
          "description": "Standard email/password authentication endpoints",
          "item": []
        },
        {
          "name": "Google OAuth Flow",
          "description": "Google OAuth 2.0 authentication flow endpoints",
          "item": []
        },
        {
          "name": "Account Linking",
          "description": "Link and unlink Google accounts with existing users",
          "item": []
        },
        {
          "name": "Auth Management",
          "description": "Manage authentication methods and user auth status",
          "item": []
        }
      ]
    },
    {
      "name": "üè¢ Tenant Management",
      "description": "Tenant registration and Google SSO configuration management",
      "item": [
        {
          "name": "Tenant Registration",
          "description": "Register new tenants and manage tenant lifecycle",
          "item": []
        },
        {
          "name": "Google SSO Settings",
          "description": "Configure and manage Google SSO settings for tenants",
          "item": []
        }
      ]
    },
    {
      "name": "üë• User Management",
      "description": "Complete user lifecycle management with roles and permissions",
      "item": [
        {
          "name": "CRUD Operations",
          "description": "Create, read, update, and delete user operations",
          "item": []
        },
        {
          "name": "Role Assignment",
          "description": "Assign and manage user roles",
          "item": []
        },
        {
          "name": "Permission Management",
          "description": "Manage user permissions and view effective permissions",
          "item": []
        }
      ]
    },
    {
      "name": "üõ°Ô∏è Role & Permission System",
      "description": "Role-based access control system management",
      "item": [
        {
          "name": "Role Management",
          "description": "Create and manage roles with permission assignments",
          "item": []
        },
        {
          "name": "Permission Management",
          "description": "Create and manage individual permissions",
          "item": []
        }
      ]
    },
    {
      "name": "üìÅ Project Management",
      "description": "Project lifecycle management within tenant context",
      "item": [
        {
          "name": "CRUD Operations",
          "description": "Complete project management operations",
          "item": []
        }
      ]
    },
    {
      "name": "üîî Notification System",
      "description": "Comprehensive notification system with preferences and broadcasting",
      "item": [
        {
          "name": "Notification CRUD",
          "description": "Create, read, update, and delete notifications",
          "item": []
        },
        {
          "name": "Notification Preferences",
          "description": "Manage user notification preferences by category and channel",
          "item": []
        },
        {
          "name": "Broadcasting",
          "description": "Tenant-wide notification broadcasting (admin only)",
          "item": []
        },
        {
          "name": "Privacy Controls",
          "description": "Notification privacy and visibility controls",
          "item": []
        }
      ]
    },
    {
      "name": "üìä System Monitoring",
      "description": "System health monitoring and alerting (admin access required)",
      "item": [
        {
          "name": "Queue Monitoring",
          "description": "Monitor notification queues and processing statistics",
          "item": []
        },
        {
          "name": "Alert Management",
          "description": "Configure and manage system alerts",
          "item": []
        },
        {
          "name": "Health Checks",
          "description": "Detailed system health and component status checks",
          "item": []
        }
      ]
    }
  ]
}