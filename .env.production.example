# Production Environment Configuration for Multi-Tenant NestJS Backend
# Copy this file to .env.production and configure with your production values

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DATABASE_URL="postgresql://username:password@postgres:5432/multitenant_prod"
POSTGRES_DB="multitenant_prod"
POSTGRES_USER="username"
POSTGRES_PASSWORD="your-strong-database-password"

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_URL="redis://:your-strong-redis-password@redis:6379"
REDIS_PASSWORD="your-strong-redis-password"

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
NODE_ENV="production"
PORT=3000
APP_PORT=3000

# =============================================================================
# JWT CONFIGURATION
# =============================================================================
JWT_SECRET="your-very-strong-jwt-secret-key-change-this-in-production"
JWT_EXPIRATION="15m"

# =============================================================================
# GOOGLE OAUTH CONFIGURATION
# =============================================================================
GOOGLE_CLIENT_ID="your-google-client-id.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="your-google-client-secret"
GOOGLE_CALLBACK_URL="https://yourdomain.com/api/auth/google/callback"
GOOGLE_LINK_CALLBACK_URL="https://yourdomain.com/api/auth/google/link/callback"

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
CORS_ORIGIN="https://yourdomain.com,https://app.yourdomain.com"

# =============================================================================
# TENANT CONFIGURATION
# =============================================================================
TENANT_HEADER_NAME="x-tenant-id"
ENABLE_SUBDOMAIN_ROUTING=true

# =============================================================================
# OTP CONFIGURATION
# =============================================================================
OTP_EXPIRATION_MINUTES=30
OTP_LENGTH=6
OTP_RATE_LIMIT_ATTEMPTS=3
OTP_RATE_LIMIT_WINDOW_MS=3600000
EMAIL_OTP_TEMPLATE_ID="otp-verification"

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
TENANT_RATE_LIMIT_WINDOW_MS=60000
TENANT_RATE_LIMIT_MAX_REQUESTS=100
USER_RATE_LIMIT_WINDOW_MS=60000
USER_RATE_LIMIT_MAX_REQUESTS=50
NOTIFICATION_RATE_LIMIT_WINDOW_MS=3600000
NOTIFICATION_RATE_LIMIT_MAX_REQUESTS=10

# =============================================================================
# QUEUE CONFIGURATION
# =============================================================================
NOTIFICATION_QUEUE_CONCURRENCY=5
NOTIFICATION_MAX_RETRIES=3
NOTIFICATION_RETRY_DELAY=5000

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================
WEBSOCKET_CORS_ORIGIN="https://yourdomain.com"

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
# Supported providers: resend, ses, onesignal, smtp
EMAIL_PROVIDER="resend"
EMAIL_API_KEY="your-resend-api-key"
EMAIL_FROM_ADDRESS="noreply@yourdomain.com"
EMAIL_FROM_NAME="Your App Name"

# SMTP Configuration (if using SMTP provider)
SMTP_HOST="smtp.yourdomain.com"
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER="your-smtp-username"
SMTP_PASSWORD="your-smtp-password"

# AWS SES Configuration (if using SES provider)
AWS_REGION="us-east-1"
AWS_ACCESS_KEY_ID="your-aws-access-key"
AWS_SECRET_ACCESS_KEY="your-aws-secret-key"

# =============================================================================
# SMS CONFIGURATION
# =============================================================================
# Supported providers: twilio, termii
SMS_PROVIDER="twilio"
SMS_API_KEY="your-twilio-account-sid"
SMS_API_SECRET="your-twilio-auth-token"
SMS_FROM_NUMBER="+1234567890"

# Termii Configuration (if using Termii provider)
TERMII_SENDER_ID="YourApp"

# =============================================================================
# PHONE NUMBER CONFIGURATION
# =============================================================================
DEFAULT_COUNTRY_CODE="+1"

# =============================================================================
# IN-APP NOTIFICATION CONFIGURATION
# =============================================================================
IN_APP_NOTIFICATION_EXPIRY_DAYS=30
MAX_UNREAD_NOTIFICATIONS=100

# =============================================================================
# DATA PRIVACY CONFIGURATION
# =============================================================================
NOTIFICATION_RETENTION_DAYS=90
AUDIT_LOG_RETENTION_DAYS=365

# =============================================================================
# ALERTING CONFIGURATION
# =============================================================================
ALERTING_ENABLED=true

# Failure Rate Alert (percentage)
ALERT_FAILURE_RATE_THRESHOLD=5
ALERT_FAILURE_RATE_ENABLED=true

# Queue Depth Alert (number of jobs)
ALERT_QUEUE_DEPTH_THRESHOLD=1000
ALERT_QUEUE_DEPTH_ENABLED=true

# Queue Lag Alert (seconds)
ALERT_QUEUE_LAG_THRESHOLD=300
ALERT_QUEUE_LAG_ENABLED=true

# Provider Error Rate Alert (percentage)
ALERT_PROVIDER_ERROR_THRESHOLD=10
ALERT_PROVIDER_ERROR_ENABLED=true

# =============================================================================
# ALERT DELIVERY CONFIGURATION
# =============================================================================
# Generic webhook URL for custom alert handling
ALERT_WEBHOOK_URL="https://your-webhook-endpoint.com/alerts"

# Comma-separated list of email addresses for alert notifications
ALERT_EMAIL_RECIPIENTS="admin@yourdomain.com,devops@yourdomain.com"

# Slack webhook URL for Slack notifications
ALERT_SLACK_WEBHOOK_URL="https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK"

# Email configuration for alerts
ALERT_EMAIL_FROM="alerts@yourdomain.com"
EMAIL_WEBHOOK_URL="https://your-email-webhook.com"

# =============================================================================
# DATABASE SEEDING
# =============================================================================
# Set to true only for initial deployment, then set to false
SEED_DATABASE=false